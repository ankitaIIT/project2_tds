<html lang="en" data-bs-theme="light"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDS 2025 Jan GA3 - Large Language Models</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" integrity="sha384-XGjxtQfXaH2tnPFa9x+ruJTuLE3Aa6LhHSWRr1XeTyhezb4abCG4ccI5AkVDxqC+" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.10.0/build/styles/default.min.css" integrity="sha384-4Y0nObtF3CbKnh+lpzmAVdAMtQXl+ganWiiv73RcGVdRdfVIya8Cao1C8ZsVRRDz" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.10.0/build/styles/github-dark.min.css">
    <script src="https://browser.sentry-cdn.com/8.55.0/bundle.tracing.replay.min.js" crossorigin="anonymous"></script><script src="https://js.sentry-cdn.com/f9b738b8a1bfb42581e666ab0a7dbb22.min.js" crossorigin="anonymous"></script>
    <style>
      body {
        padding-top: 64px;
      }
  
      body[data-status="admin"] #navbar {
        background-color: var(--bs-primary) !important;
  
        .navbar-brand::before {
          content: "[Admin] ";
        }
      }
  
      body[data-status="running"] #navbar {
        background-color: var(--bs-success) !important;
      }
  
      body[data-status="ended"] #navbar {
        background-color: var(--bs-danger) !important;
      }
  
      [id] {
        scroll-margin-top: 4rem;
      }
  
      textarea::-webkit-scrollbar {
        width: 8px;
      }
  
      textarea::-webkit-scrollbar-track {
        background: #333;
      }
  
      textarea::-webkit-scrollbar-thumb {
        background: #666;
        cursor: default;
      }
  
      textarea::-webkit-scrollbar-thumb:hover {
        background: #888;
      }
  
      /* Add a YouTube icon on top of all YouTube links with images */
      a[href*="youtu"]:has(img[src*="ytimg"]) {
        position: relative;
        display: inline-block;
      }
      a[href*="youtu"]:has(img[src*="ytimg"])::after {
        content: "";
        position: absolute;
        left: 50%;
        top: 50%;
        width: 100px;
        height: 100px;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-youtube" viewBox="0 0 16 16"><path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.01 2.01 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.01 2.01 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31 31 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.01 2.01 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A100 100 0 0 1 7.858 2z"/><path d="M6.4 5.209v4.818l4.157-2.408z" fill="white"/></svg>') no-repeat center center;
        background-size: contain;
        transform: translate(-50%, -50%);
        pointer-events: none;
      }
  </style>
  <style id="googleidentityservice_button_styles">.qJTHM{-webkit-user-select:none;color:#202124;direction:ltr;-webkit-touch-callout:none;font-family:"Roboto-Regular",arial,sans-serif;-webkit-font-smoothing:antialiased;font-weight:400;margin:0;overflow:hidden;-webkit-text-size-adjust:100%}.ynRLnc{left:-9999px;position:absolute;top:-9999px}.L6cTce{display:none}.bltWBb{word-break:break-all}.hSRGPd{color:#1a73e8;cursor:pointer;font-weight:500;text-decoration:none}.Bz112c-W3lGp{height:16px;width:16px}.Bz112c-E3DyYd{height:20px;width:20px}.Bz112c-r9oPif{height:24px;width:24px}.Bz112c-uaxL4e{-webkit-border-radius:10px;border-radius:10px}.LgbsSe-Bz112c{display:block}.S9gUrf-YoZ4jf,.S9gUrf-YoZ4jf *{border:none;margin:0;padding:0}.fFW7wc-ibnC6b>.aZ2wEe>div{border-color:#4285f4}.P1ekSe-ZMv3u>div:nth-child(1){background-color:#1a73e8!important}.P1ekSe-ZMv3u>div:nth-child(2),.P1ekSe-ZMv3u>div:nth-child(3){background-image:linear-gradient(to right,rgba(255,255,255,.7),rgba(255,255,255,.7)),linear-gradient(to right,#1a73e8,#1a73e8)!important}.haAclf{display:inline-block}.nsm7Bb-HzV7m-LgbsSe{-webkit-border-radius:4px;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:background-color .218s,border-color .218s;transition:background-color .218s,border-color .218s;-webkit-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #dadce0;color:#3c4043;cursor:pointer;font-family:"Google Sans",arial,sans-serif;font-size:14px;height:40px;letter-spacing:0.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;vertical-align:middle;white-space:nowrap;width:auto}@media screen and (-ms-high-contrast:active){.nsm7Bb-HzV7m-LgbsSe{border:2px solid windowText;color:windowText}}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe{font-size:14px;height:32px;letter-spacing:0.25px;padding:0 10px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe{font-size:11px;height:20px;letter-spacing:0.3px;padding:0 8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe{padding:0;width:40px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe{width:32px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe{width:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK{-webkit-border-radius:20px;border-radius:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.pSzOP-SxQuSe{-webkit-border-radius:16px;border-radius:16px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.purZT-SxQuSe{-webkit-border-radius:10px;border-radius:10px}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc{border:none;color:#fff}.nsm7Bb-HzV7m-LgbsSe.MFS4be-v3pZbf-Ia7Qfc{background-color:#1a73e8}.nsm7Bb-HzV7m-LgbsSe.MFS4be-JaPV2b-Ia7Qfc{background-color:#202124;color:#e8eaed}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:18px;margin-right:8px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:14px;min-width:14px;width:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:10px;min-width:10px;width:10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin-left:8px;margin-right:-4px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:10px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:4px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:3px;border-top-left-radius:3px;-webkit-border-bottom-left-radius:3px;border-bottom-left-radius:3px;display:-webkit-box;display:-webkit-flex;display:flex;justify-content:center;-webkit-align-items:center;align-items:center;background-color:#fff;height:36px;margin-left:-10px;margin-right:12px;min-width:36px;width:36px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c,.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:28px;margin-left:-8px;margin-right:10px;min-width:28px;width:28px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:16px;margin-left:-6px;margin-right:8px;min-width:16px;width:16px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:3px;border-radius:3px;margin-left:2px;margin-right:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:14px;border-radius:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:8px;border-radius:8px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-bN97Pc-sM5MNb{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-flex-direction:row;flex-direction:row;justify-content:space-between;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;position:relative;width:100%}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX{justify-content:center}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:1;flex-grow:1;font-family:"Google Sans",arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-weight:300}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:0;flex-grow:0}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-MJoBVe{-webkit-transition:background-color .218s;transition:background-color .218s;bottom:0;left:0;position:absolute;right:0;top:0}.nsm7Bb-HzV7m-LgbsSe:hover,.nsm7Bb-HzV7m-LgbsSe:focus{-webkit-box-shadow:none;box-shadow:none;border-color:rgb(210,227,252);outline:none}.nsm7Bb-HzV7m-LgbsSe:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.04)}.nsm7Bb-HzV7m-LgbsSe:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.1)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.24)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.32)}.nsm7Bb-HzV7m-LgbsSe .n1UuX-DkfjY{-webkit-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:flex;height:20px;margin-left:-4px;margin-right:8px;min-width:20px;width:20px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-family:"Roboto";font-size:12px;text-align:left}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .ssJRIf,.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .fmcmS{overflow:hidden;text-overflow:ellipsis}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;color:#5f6368;fill:#5f6368;font-size:11px;font-weight:400}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.MFS4be-Ia7Qfc .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{color:#e8eaed;fill:#e8eaed}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .Bz112c{height:18px;margin:-3px -3px -3px 2px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:0;border-top-left-radius:0;-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-webkit-border-top-right-radius:3px;border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;border-bottom-right-radius:3px;margin-left:12px;margin-right:-10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.L5Fo6c-sM5MNb{border:0;display:block;left:0;position:relative;top:0}.L5Fo6c-bF1uUb{-webkit-border-radius:4px;border-radius:4px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.L5Fo6c-bF1uUb:focus{border:none;outline:none}sentinel{}</style></head>
  
  <body data-status="ended">
  
    <nav class="navbar navbar-expand-lg fixed-top bg-body-tertiary" data-bs-theme="dark" id="navbar">
      <div class="container-fluid">
        <span class="navbar-brand" href=".">
          <span id="countdown">Ended at Wed, 5 Feb, 2025, 11:59 pm IST</span>
          <button id="score" type="button" class="btn btn-dark btn-sm mb-1 ms-2" disabled="">Score: 0</button>
          <button type="button" class="btn btn-outline-light btn-sm mb-1 ms-2 check-action" title="Check your score" disabled="">Check all</button>
          <button type="button" class="btn btn-outline-light btn-sm mb-1 ms-2 save-action" title="Save your progress" disabled="">Save</button>
        </span>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <div class="nav-item dropdown ms-auto" role="group" aria-label="Toggle dark mode" title="Toggle Dark Mode">
            <button class="dark-theme-toggle btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Toggle theme (light)">
              <i class="bi bi-circle-half"></i> <span class="d-lg-none ms-2">Toggle theme</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><button class="dropdown-item active" data-bs-theme-value="light" aria-pressed="true"><i class="me-2 bi bi-sun-fill"></i> Light</button></li>
              <li><button class="dropdown-item" data-bs-theme-value="dark" aria-pressed="false"><i class="me-2 bi bi-moon-stars-fill"></i> Dark</button></li>
              <li><button class="dropdown-item" data-bs-theme-value="auto" aria-pressed="false"><i class="me-2 bi bi-circle-half"></i> Auto</button></li>
            </ul>
          </div>
        </div>
      </div>
    </nav>
  
    <main class="container">
      <section id="instructions">
      <h1 class="display-3 my-5">
        TDS 2025 Jan GA3 - Large Language Models
      </h1>
  
      <h2 class="display-6 my-5">Instructions</h2>
      <ol>
        <li><strong>Learn what you need</strong>. Reading material is provided, but feel free to skip it if you can answer the question. (Or learn it, just for pleasure.)</li>
        <li><strong>Check answers regularly</strong> by pressing <kbd>Check</kbd>. It shows which answers are right or wrong. You can check multiple times.</li>
        <li><strong>Save regularly</strong> by pressing <kbd>Save</kbd>. You can save multiple times. Your last saved submission will be evaluated.</li>
        <li><strong>Reloading is OK</strong>. Your answers are saved in your browser (not server). Questions won't change except for randomized parameters.</li>
        <li><strong>Browser may struggle</strong>. If you face loading issues, turn off security restrictions or try a different browser.</li>
        <li><strong>Use anything</strong>. You can use any resources you want. The Internet, ChatGPT, friends, whatever. Use any libraries or frameworks you want.</li>
        <li><strong>It's hackable</strong>. It's possible to get the answer to <em>some</em> questions by hacking the code for this quiz. That's allowed.</li>
      </ol>
      <p><strong>Note:</strong> You'll run multiple servers in this exam. <em>All of them</em> must be running simultaneously while checking or saving answers.</p>
      <div class="alert alert-info d-flex align-items-center p-4 border-start border-info border-2 mt-5">
        <i class="bi bi-chat-square-text-fill fs-4 me-3"></i>
        <div>
          <strong>Have questions?</strong>
          <a href="https://discourse.onlinedegree.iitm.ac.in/t/ga3-large-language-models-discussion-thread-tds-jan-2025/163247" target="_blank" class="alert-link ms-2">
            Join the discussion on Discourse
          </a>
        </div>
      </div>
    </section>
  
      <section id="login" class="my-5"><!---->
          <div id="logged-in-email" class="mb-3">You are logged in as <strong><!--?lit$772497800$-->22f2001103@ds.study.iitm.ac.in</strong>.</div>
          <div class="mb-3">
            <button class="btn btn-sm btn-outline-danger">
              Logout
            </button>
          </div>
        </section>
  
      <section id="notification" class="my-5"><div class="spinner-border" role="status"></div></section>
  
      <section class="alert alert-info my-5 d-flex align-items-center d-none" id="loading-questions">
        <div class="spinner-border text-primary me-2" role="status"></div>
        <span>Loading questions...</span>
      </section>
  
      <form id="exam-form" class="needs-validation" novalidate="">
        <section id="questions" class="my-5"><!----><!----><h1 class="display-6">Questions</h1><!----><!----><ol class="mt-3">
          <!--?lit$772497800$--><!----><li><a href="#hq-llm-sentiment-analysis"><!--?lit$772497800$-->LLM Sentiment Analysis</a> (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)</li><!----><!----><li><a href="#hq-token-cost"><!--?lit$772497800$-->LLM Token Cost</a> (<!--?lit$772497800$-->0.75 <!--?lit$772497800$-->marks)</li><!----><!----><li><a href="#hq-generate-addresses-with-llms"><!--?lit$772497800$-->Generate addresses with LLMs</a> (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)</li><!----><!----><li><a href="#hq-llm-vision"><!--?lit$772497800$-->LLM Vision</a> (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)</li><!----><!----><li><a href="#hq-llm-embeddings"><!--?lit$772497800$-->LLM Embeddings</a> (<!--?lit$772497800$-->0.75 <!--?lit$772497800$-->marks)</li><!----><!----><li><a href="#hq-embedding-similarity"><!--?lit$772497800$-->Embedding Similarity</a> (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)</li><!----><!----><li><a href="#hq-vector-databases"><!--?lit$772497800$-->Vector Databases</a> (<!--?lit$772497800$-->1.5 <!--?lit$772497800$-->marks)</li><!----><!----><li><a href="#hq-function-calling"><!--?lit$772497800$-->Function Calling</a> (<!--?lit$772497800$-->1.5 <!--?lit$772497800$-->marks)</li><!----><!----><li><a href="#hq-get-llm-to-say-yes"><!--?lit$772497800$-->Get an LLM to say Yes</a> (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)</li><!---->
        </ol><!----><!---->
            <div class="card my-5" data-question="q-llm-sentiment-analysis" id="hq-llm-sentiment-analysis">
              <div class="card-header">
                <span class="badge text-bg-primary me-2"><!--?lit$772497800$-->1</span>
                <!--?lit$772497800$-->LLM Sentiment Analysis (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)
              </div>
              <!--?lit$772497800$--><!----><div class="card-body border-bottom"><!--?lit$772497800$--><h2>LLM Sentiment Analysis</h2>
  <p><a href="https://platform.openai.com/" target="_blank" rel="noopener noreferrer">OpenAI's API</a> provides access to language models like GPT 4o, GPT 4o mini, etc.</p>
  <p>For more details, read OpenAI's guide for:</p>
  <ul>
  <li><a href="https://platform.openai.com/docs/guides/text-generation" target="_blank" rel="noopener noreferrer">Text Generation</a></li>
  <li><a href="https://platform.openai.com/docs/guides/vision" target="_blank" rel="noopener noreferrer">Vision</a></li>
  <li><a href="https://platform.openai.com/docs/guides/structured-outputs" target="_blank" rel="noopener noreferrer">Structured Outputs</a></li>
  </ul>
  <p>Start with this quick tutorial:</p>
  <p><a href="https://youtu.be/Xz4ORA0cOwQ" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi_webp/Xz4ORA0cOwQ/sddefault.webp" alt="OpenAI API Quickstart: Send your First API Request" class="img-fluid"></a></p>
  <p>Here's a minimal example using <code>curl</code> to generate text:</p>
  <pre><code class="language-bash hljs" data-highlighted="yes">curl https://api.openai.com/v1/chat/completions \
    -H <span class="hljs-string">"Content-Type: application/json"</span> \
    -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$OPENAI_API_KEY</span>"</span> \
    -d <span class="hljs-string">'{
      "model": "gpt-4o-mini",
      "messages": [{ "role": "user", "content": "Write a haiku about programming." }]
    }'</span>
  </code></pre>
  <p>Let's break down the request:</p>
  <ul>
  <li><code>curl https://api.openai.com/v1/chat/completions</code>: The API endpoint for text generation.</li>
  <li><code>-H "Content-Type: application/json"</code>: The content type of the request.</li>
  <li><code>-H "Authorization: Bearer $OPENAI_API_KEY"</code>: The API key for authentication.</li>
  <li><code>-d</code>: The request body.<ul>
  <li><code>"model": "gpt-4o-mini"</code>: The model to use for text generation.</li>
  <li><code>"messages":</code>: The messages to send to the model.<ul>
  <li><code>"role": "user"</code>: The role of the message.</li>
  <li><code>"content": "Write a haiku about programming."</code>: The content of the message.</li>
  </ul>
  </li>
  </ul>
  </li>
  </ul>
  <p><a href="https://youtu.be/_D46QrX-2iU" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi_webp/_D46QrX-2iU/sddefault.webp" alt="LLM Sentiment Analysis" class="img-fluid"></a></p>
  <p>This video explains how to use large language models (LLMs) for sentiment analysis and classification, covering:</p>
  <ul>
  <li><strong>Sentiment Analysis</strong>: Use OpenAI API to identify the sentiment of movie reviews as positive or negative.</li>
  <li><strong>Prompt Engineering</strong>: Learn how to craft effective prompts to get desired results from LLMs.</li>
  <li><strong>LLM Training</strong>: Understand how to train LLMs by providing examples and feedback.</li>
  <li><strong>OpenAI API Integration</strong>: Integrate OpenAI API into Python code to perform sentiment analysis.</li>
  <li><strong>Tokenization</strong>: Learn about tokenization and its impact on LLM input and cost.</li>
  <li><strong>Zero-Shot, One-Shot, and Multi-Shot Learning</strong>: Understand different approaches to using LLMs for learning.</li>
  </ul>
  <p>Here are the links used in the video:</p>
  <ul>
  <li><a href="https://colab.research.google.com/drive/1tVZBD9PKto1kPmVJFNUt0tdzT5EmLLWs" target="_blank" rel="noopener noreferrer">Jupyter Notebook</a></li>
  <li><a href="https://drive.google.com/file/d/1X33ao8_PE17c3htkQ-1p2dmW2xKmOq8Q/view" target="_blank" rel="noopener noreferrer">Movie reviews dataset</a></li>
  <li><a href="https://platform.openai.com/playground/chat" target="_blank" rel="noopener noreferrer">OpenAI Playground</a></li>
  <li><a href="https://openai.com/api/pricing/" target="_blank" rel="noopener noreferrer">OpenAI Pricing</a></li>
  <li><a href="https://platform.openai.com/tokenizer" target="_blank" rel="noopener noreferrer">OpenAI Tokenizer</a></li>
  <li><a href="https://platform.openai.com/docs/api-reference/" target="_blank" rel="noopener noreferrer">OpenAI API Reference</a></li>
  <li><a href="https://platform.openai.com/docs/overview" target="_blank" rel="noopener noreferrer">OpenAI Docs</a></li>
  </ul>
  </div><!---->
              <div class="card-body"><!--?lit$772497800$-->
      <p>
        DataSentinel Inc. is a tech company specializing in building advanced natural language processing (NLP) solutions.
        Their latest project involves integrating an AI-powered sentiment analysis module into an internal monitoring
        dashboard. The goal is to automatically classify large volumes of unstructured feedback and text data from various
        sources as either GOOD, BAD, or NEUTRAL. As part of the quality assurance process, the development team needs to
        test the integration with a series of sample inputs—even ones that may not represent coherent text—to ensure that
        the system routes and processes the data correctly.
      </p>
      <p>
        Before rolling out the live system, the team creates a test harness using Python. The harness employs the
        <code>httpx</code> library to send POST requests to OpenAI's API. For this proof-of-concept, the team uses the
        dummy model <code>gpt-4o-mini</code> along with a dummy API key in the Authorization header to simulate real API
        calls.
      </p>
      <p>One of the test cases involves sending a sample piece of meaningless text:</p>
      <pre><code data-highlighted="yes" class="hljs language-gauss">Z  ROo1Bviz  NkOAyhvvI1Er Ty oLEbm KmEAt  <span class="hljs-built_in">qZ</span> 
  voAX</code></pre>
      <p>
        Write a Python program that uses <code>httpx</code> to send a POST request to OpenAI's API to analyze the
        sentiment of this (meaningless) text into GOOD, BAD or NEUTRAL. Specifically:
      </p>
      <ol>
        <li>Make sure you pass an Authorization header with dummy API key.</li>
        <li>Use <code>gpt-4o-mini</code> as the model.</li>
        <li>
          The first message must be a system message asking the LLM to analyze the sentiment of the text. Make sure you
          mention GOOD, BAD, or NEUTRAL as the categories.
        </li>
        <li>The second message must be <strong>exactly</strong> the text contained above.</li>
      </ol>
      <p>
        This test is crucial for DataSentinel Inc. as it validates both the API integration and the correctness of message
        formatting in a controlled environment. Once verified, the same mechanism will be used to process genuine customer
        feedback, ensuring that the sentiment analysis module reliably categorizes data as GOOD, BAD, or NEUTRAL. This
        reliability is essential for maintaining high operational standards and swift response times in real-world
        applications.
      </p>
      <p><strong>Note</strong>: This uses a dummy <code>httpx</code> library, not the real one. You can only use:</p>
      <ol>
        <li><code class="language-python">response = httpx.get(url, **kwargs)</code></li>
        <li><code class="language-python">response = httpx.post(url, json=None, **kwargs)</code></li>
        <li><code class="language-python">response.raise_for_status()</code></li>
        <li><code class="language-python">response.json()</code></li>
      </ol>
      <div class="mb-3">
        <label class="form-label" for="q-llm-sentiment-analysis">Code</label>
        <textarea class="form-control font-monospace text-bg-dark" rows="6" id="q-llm-sentiment-analysis" name="q-llm-sentiment-analysis" disabled=""></textarea><div class="valid-feedback mb-3 comment">Correct!</div>
              <div class="invalid-feedback mb-3 comment">Incorrect. Try again.</div>
      </div>
    </div>
              <div class="card-footer d-flex">
                <button type="button" class="btn btn-primary check-answer" data-question="q-llm-sentiment-analysis" disabled="">Check</button>
              </div>
            </div>
          <!----><!---->
            <div class="card my-5" data-question="q-token-cost" id="hq-token-cost">
              <div class="card-header">
                <span class="badge text-bg-primary me-2"><!--?lit$772497800$-->2</span>
                <!--?lit$772497800$-->LLM Token Cost (<!--?lit$772497800$-->0.75 <!--?lit$772497800$-->marks)
              </div>
              <!--?lit$772497800$-->
              <div class="card-body"><!--?lit$772497800$-->
      <p>
        LexiSolve Inc. is a startup that delivers a conversational AI platform to enterprise clients. The system leverages
        OpenAI’s language models to power a variety of customer service, sentiment analysis, and data extraction features.
        Because pricing for these models is based on the number of tokens processed—and strict token limits apply—accurate
        token accounting is critical for managing costs and ensuring system stability.
      </p>
      <p>
        To optimize operational costs and prevent unexpected API overages, the engineering team at LexiSolve has developed
        an internal diagnostic tool that simulates and measures token usage for typical prompts sent to the language
        model.
      </p>
      <p>
        One specific test case an understanding of text tokenization. Your task is to generate data for that test case.
      </p>
      <p>Specifically, when you make a request to OpenAI's GPT-4o-Mini with <em>just this user message</em>:</p>
      <pre style="white-space: pre-wrap;"><code class="language-text hljs language-plaintext" data-highlighted="yes">List only the valid English words from these: xBqC, nLfS, 51CA7A67, BCOJF4, r, Zgo5EXQr, sb3pbk0T, kEqOK, 34ESqsV, d, Iy2bq6vFLd, 8NJ5u, Rw, fX4, Hy7f5poeKz, hAPwdqLWNM, GXb25i, oF7KO, CCLzOF, IQBpJ, ZGqMYVrp, yOu, 0bPt, JUuJ, mBTIG, ZHv5D, kngu</code></pre>
      <p>... how many <em>input tokens</em> does it use up?</p>
  
      <div class="mb-3">
        <label class="form-label" for="q-token-cost">Number of tokens:</label>
        <input class="form-control" id="q-token-cost" name="q-token-cost" disabled=""><div class="valid-feedback mb-3 comment">Correct!</div>
              <div class="invalid-feedback mb-3 comment">Incorrect. Try again.</div>
        <p class="text-muted">
          Remember: indicating that this is a <code>user</code> message takes up a few extra tokens. You actually need to
          make the request to get the answer.
        </p>
      </div>
    </div>
              <div class="card-footer d-flex">
                <button type="button" class="btn btn-primary check-answer" data-question="q-token-cost" disabled="">Check</button>
              </div>
            </div>
          <!----><!---->
            <div class="card my-5" data-question="q-generate-addresses-with-llms" id="hq-generate-addresses-with-llms">
              <div class="card-header">
                <span class="badge text-bg-primary me-2"><!--?lit$772497800$-->3</span>
                <!--?lit$772497800$-->Generate addresses with LLMs (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)
              </div>
              <!--?lit$772497800$--><!----><div class="card-body border-bottom"><!--?lit$772497800$--><h2>LLM Text Extraction</h2>
  <p><a href="json.md" target="_blank" rel="noopener noreferrer">JSON</a> is one of the most widely used formats in the world for applications to exchange data.</p>
  <p><a href="https://youtu.be/72514uGffPE" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi_webp/72514uGffPE/sddefault.webp" alt="LLM Extraction" class="img-fluid"></a></p>
  <p>This video explains how to use LLMs to extract structure from unstructured data, covering:</p>
  <ul>
  <li><strong>LLM for Data Extraction</strong>: Use OpenAI's API to extract structured information from unstructured data like addresses.</li>
  <li><strong>JSON Schema</strong>: Define a JSON schema to ensure consistent and structured output from the LLM.</li>
  <li><strong>Prompt Engineering</strong>: Craft effective prompts to guide the LLM's response and improve accuracy.</li>
  <li><strong>Data Cleaning</strong>: Use string functions and OpenAI's API to clean and standardize data.</li>
  <li><strong>Data Analysis</strong>: Analyze extracted data using Pandas to gain insights.</li>
  <li><strong>LLM Limitations</strong>: Understand the limitations of LLMs, including potential errors and inconsistencies in output.</li>
  <li><strong>Production Use Cases</strong>: Explore real-world applications of LLMs for data extraction, such as customer service email analysis.</li>
  </ul>
  <p>Here are the links used in the video:</p>
  <ul>
  <li><a href="https://colab.research.google.com/drive/1Z8mG-RPTSYY4qwkoNdzRTc4StbnwOXeE" target="_blank" rel="noopener noreferrer">Jupyter Notebook</a></li>
  <li><a href="https://json-schema.org/" target="_blank" rel="noopener noreferrer">JSON Schema</a></li>
  <li><a href="https://platform.openai.com/docs/guides/function-calling" target="_blank" rel="noopener noreferrer">Function calling</a></li>
  </ul>
  <p>Structured Outputs is a feature that ensures the model will always generate responses that adhere to your supplied
  <a href="https://json-schema.org/overview/what-is-jsonschema" target="_blank" rel="noopener noreferrer">JSON Schema</a>, so you don't need to worry about the model omitting a required key,
  or hallucinating an invalid enum value.</p>
  <pre><code class="language-bash hljs" data-highlighted="yes">curl https://api.openai.com/v1/chat/completions \
  -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$OPENAI_API_KEY</span>"</span> \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "model": "gpt-4o-2024-08-06",
    "messages": [
      { "role": "system", "content": "You are a helpful math tutor. Guide the user through the solution step by step." },
      { "role": "user", "content": "how can I solve 8x + 7 = -23" }
    ],
    "response_format": {
      "type": "json_schema",
      "json_schema": {
        "name": "math_response",
        "strict": true
        "schema": {
          "type": "object",
          "properties": {
            "steps": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": { "explanation": { "type": "string" }, "output": { "type": "string" } },
                "required": ["explanation", "output"],
                "additionalProperties": false
              }
            },
            "final_answer": { "type": "string" }
          },
          "required": ["steps", "final_answer"],
          "additionalProperties": false
        }
      }
    }
  }'</span>
  </code></pre>
  <p>Here's what the <code>response_format</code> tells OpenAI. The items marked ⚠️ are OpenAI specific requirements for the JSON schema.</p>
  <ul>
  <li><code>"type": "json_schema"</code>: We want you to generate a JSON response that follows this schema.</li>
  <li><code>"json_schema":</code>: We're going to give you a schema.<ul>
  <li><code>"name": "math_response"</code>: The schema is called <code>math_response</code>. (We can call it anything.)</li>
  <li><code>"strict": true</code>: Follow the schema exactly.</li>
  <li><code>"schema":</code>: Now, here's the actual JSON schema.<ul>
  <li><code>"type": "object"</code>: Return an object. ⚠️ The root object <strong>must</strong> be an object.</li>
  <li><code>"properties":</code>: The object has these properties:<ul>
  <li><code>"steps":</code>: There's a <code>steps</code> property.<ul>
  <li><code>"type": "array"</code>: It's an array.</li>
  <li><code>"items":</code>: Each item in the array...<ul>
  <li><code>"type": "object"</code>: ... is an object.</li>
  <li><code>"properties":</code>: The object has these properties:<ul>
  <li><code>"explanation":</code>: There's an <code>explanation</code> property.<ul>
  <li><code>"type": "string"</code>: ... which is a string.</li>
  </ul>
  </li>
  <li><code>"output":</code>: There's an <code>output</code> property.<ul>
  <li><code>"type": "string"</code>: ... which is a string, too.</li>
  </ul>
  </li>
  </ul>
  </li>
  <li><code>"required": ["explanation", "output"]</code>: ⚠️ You <strong>must</strong> add <code>"required": [...]</code> and include <strong>all</strong> fields int he object.</li>
  <li><code>"additionalProperties": false</code>: ⚠️ OpenAI requires every object to have <code>"additionalProperties": false</code>.</li>
  </ul>
  </li>
  </ul>
  </li>
  <li><code>"final_answer":</code>: There's a <code>final_answer</code> property.<ul>
  <li><code>"type": "string"</code>: ... which is a string.</li>
  </ul>
  </li>
  </ul>
  </li>
  <li><code>"required": ["steps", "final_answer"]</code>: ⚠️ You <strong>must</strong> add <code>"required": [...]</code> and include <strong>all</strong> fields in the object.</li>
  <li><code>"additionalProperties": false</code>: ⚠️ OpenAI requires every object to have <code>"additionalProperties": false</code>.</li>
  </ul>
  </li>
  </ul>
  </li>
  </ul>
  </div><!---->
              <div class="card-body"><!--?lit$772497800$-->
      <style scoped="">
        textarea[name="<!---->q-generate-addresses-with-llms"] {
          opacity: 0;
          pointer-events: none;
        }
      <!----></style>
      <p>
        RapidRoute Solutions is a logistics and delivery company that relies on accurate and standardized address data to
        optimize package routing. Recently, they encountered challenges with manually collecting and verifying new
        addresses for testing their planning software. To overcome this, the company decided to create an automated
        address generator using a language model, which would provide realistic, standardized U.S. addresses that could be
        directly integrated into their system.
      </p>
      <p>
        The engineering team at RapidRoute is tasked with designing a service that uses OpenAI's GPT-4o-Mini model to
        generate fake but plausible address data. The addresses must follow a strict format, which is critical for
        downstream processes such as geocoding, routing, and verification against customer databases. For consistency and
        validation, the development team requires that the addresses be returned as structured JSON data with no
        additional properties that could confuse their parsers.
      </p>
  
      <p>
        As part of the integration process, you need to write the body of the request to an
        <a href="https://platform.openai.com/docs/api-reference/chat">OpenAI chat completion call</a> that:
      </p>
      <ul>
        <li>Uses model <code>gpt-4o-mini</code></li>
        <li>Has a <code>system</code> message: <code>Respond in JSON</code></li>
        <li>Has a user message: <code>Generate 10 random addresses in the US</code></li>
        <li>
          Uses <a href="https://platform.openai.com/docs/guides/structured-outputs/">structured outputs</a> to respond
          with an object <code>addresses</code> which is an array of objects with <strong>required</strong> fields:
          <!--?lit$772497800$--><!----><code><!--?lit$772497800$-->latitude</code> (<!--?lit$772497800$-->number) <!----><!----><code><!--?lit$772497800$-->street</code> (<!--?lit$772497800$-->string) <!----><!----><code><!--?lit$772497800$-->longitude</code> (<!--?lit$772497800$-->number) <!---->.
        </li>
        <li>Sets <code>additionalProperties</code> to <code>false</code> to prevent additional properties.</li>
      </ul>
      <p>
        Note that you don't need to run the request or use an API key; your task is simply to write the correct JSON body.
      </p>
      <div class="mb-3">
        <label class="form-label" for="q-generate-addresses-with-llms">What is the JSON body we should send to <code>https://api.openai.com/v1/chat/completions</code> for this? (No
          need to run it or to use an API key. Just write the body of the request below.)</label>
        <textarea class="form-control font-monospace text-bg-dark d-none" rows="6" disabled="" id="q-generate-addresses-with-llms" name="q-generate-addresses-with-llms"></textarea><div class="valid-feedback mb-3 comment">Correct!</div>
              <div class="invalid-feedback mb-3 comment">Incorrect. Try again.</div>
        <p class="text-muted">There's no answer box above. Figure out how to enable it. That's part of the test.</p>
      </div>
    </div>
              <div class="card-footer d-flex">
                <button type="button" class="btn btn-primary check-answer" data-question="q-generate-addresses-with-llms" disabled="">Check</button>
              </div>
            </div>
          <!----><!---->
            <div class="card my-5" data-question="q-llm-vision" id="hq-llm-vision">
              <div class="card-header">
                <span class="badge text-bg-primary me-2"><!--?lit$772497800$-->4</span>
                <!--?lit$772497800$-->LLM Vision (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)
              </div>
              <!--?lit$772497800$--><!----><div class="card-body border-bottom"><!--?lit$772497800$--><h1>Base 64 Encoding</h1>
  <p>Base64 is a method to convert binary data into ASCII text. It's essential when you need to transmit binary data through text-only channels or embed binary content in text formats.</p>
  <p>Watch this quick explanation of how Base64 works (3 min):</p>
  <p><a href="https://youtu.be/8qkxeZmKmOY" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi_webp/8qkxeZmKmOY/sddefault.webp" alt="What is Base64? (3 min)" class="img-fluid"></a></p>
  <p>Here's how it works:</p>
  <ul>
  <li>It takes 3 bytes (24 bits) and converts them into 4 ASCII characters</li>
  <li>... using 64 characters: A-Z, a-z, 0-9, + and / (padding with <code>=</code> to make the length a multiple of 4)</li>
  <li>There's a URL-safe variant of Base64 that replaces + and / with - and _ to avoid issues in URLs</li>
  <li>Base64 adds ~33% overhead (since every 3 bytes becomes 4 characters)</li>
  </ul>
  <p>Common Python operations with Base64:</p>
  <pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-keyword">import</span> base64
  
  <span class="hljs-comment"># Basic encoding/decoding</span>
  text = <span class="hljs-string">"Hello, World!"</span>
  <span class="hljs-comment"># Convert text to base64</span>
  encoded = base64.b64encode(text.encode()).decode()  <span class="hljs-comment"># SGVsbG8sIFdvcmxkIQ==</span>
  <span class="hljs-comment"># Convert base64 back to text</span>
  decoded = base64.b64decode(encoded).decode()        <span class="hljs-comment"># Hello, World!</span>
  <span class="hljs-comment"># Convert to URL-safe base64</span>
  url_safe = base64.urlsafe_b64encode(text.encode()).decode()  <span class="hljs-comment"># SGVsbG8sIFdvcmxkIQ==</span>
  
  <span class="hljs-comment"># Working with binary files (e.g., images)</span>
  <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'image.png'</span>, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
      binary_data = f.read()
      image_b64 = base64.b64encode(binary_data).decode()
  
  <span class="hljs-comment"># Data URI example (embed images in HTML/CSS)</span>
  data_uri = <span class="hljs-string">f"data:image/png;base64,<span class="hljs-subst">{image_b64}</span>"</span>
  </code></pre>
  <p>Data URIs allow embedding binary data directly in HTML/CSS. This reduces the number of HTTP requests and also works offline. But it increases the file size.</p>
  <p>For example, here's an SVG image embedded as a data URI:</p>
  <pre><code class="language-html hljs language-xml" data-highlighted="yes"><span class="hljs-tag">&lt;<span class="hljs-name">img</span>
    <span class="hljs-attr">src</span>=<span class="hljs-string">"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMyNTYzZWIiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMTYgNyAyIDcgNyAyLTcgMi0yIDctMi03LTctMiA3LTJaIi8+PC9zdmc+"</span>
  /&gt;</span>
  </code></pre>
  <p>Base64 is used in many places:</p>
  <ul>
  <li>JSON: Encoding binary data in JSON payloads</li>
  <li>Email: MIME attachments encoding</li>
  <li>Auth: HTTP Basic Authentication headers</li>
  <li>JWT: Encoding tokens in web authentication</li>
  <li>SSL/TLS: PEM certificate format</li>
  <li>SAML: Encoding assertions in SSO</li>
  <li>Git: Encoding binary files in patches</li>
  </ul>
  <p>Tools for working with Base64:</p>
  <ul>
  <li><a href="https://www.base64decode.org/" target="_blank" rel="noopener noreferrer">Base64 Decoder/Encoder</a> for online encoding/decoding</li>
  <li><a href="https://dopiaza.org/tools/datauri/index.php" target="_blank" rel="noopener noreferrer">data: URI Generator</a> converts files to Data URIs</li>
  </ul>
  </div><!----><!----><div class="card-body border-bottom"><!--?lit$772497800$--><h2>Vision Models</h2>
  <p><a href="https://youtu.be/FgT_Mk_bakQ" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi_webp/FgT_Mk_bakQ/sddefault.webp" alt="LLM Vision Models" class="img-fluid"></a></p>
  <p>You'll learn how to use LLMs to interpret images and extract useful information, covering:</p>
  <ul>
  <li><strong>Setting Up Vision Models</strong>: Integrate vision capabilities with LLMs using APIs like OpenAI's Chat Completion.</li>
  <li><strong>Sending Image URLs for Analysis</strong>: Pass URLs or base64-encoded images to LLMs for processing.</li>
  <li><strong>Reading Image Responses</strong>: Get detailed textual descriptions of images, from scenic landscapes to specific objects like cricketers or bank statements.</li>
  <li><strong>Extracting Data from Images</strong>: Convert extracted image data to various formats like Markdown tables or JSON arrays.</li>
  <li><strong>Handling Model Hallucinations</strong>: Address inaccuracies in extraction results, understanding how different prompts can affect output quality.</li>
  <li><strong>Cost Management for Vision Models</strong>: Adjust detail settings (e.g., "detail: low") to balance cost and output precision.</li>
  </ul>
  <p>Here are the links used in the video:</p>
  <ul>
  <li><a href="https://colab.research.google.com/drive/1bK0b1XMrZWImtw01T1w9NGraDkiVi8mS" target="_blank" rel="noopener noreferrer">Jupyter Notebook</a></li>
  <li><a href="https://platform.openai.com/docs/api-reference/chat/create" target="_blank" rel="noopener noreferrer">OpenAI Chat API Reference</a></li>
  <li><a href="https://platform.openai.com/docs/guides/vision" target="_blank" rel="noopener noreferrer">OpenAI Vision Guide</a></li>
  <li><a href="https://drive.google.com/drive/folders/14MFc7XmGIUDU4-vbmF9305c1SSQrM-gR" target="_blank" rel="noopener noreferrer">Sample images used</a></li>
  </ul>
  <p>Here is an example of how to analyze an image using the OpenAI API.</p>
  <pre><code class="language-bash hljs" data-highlighted="yes">curl https://api.openai.com/v1/chat/completions \
    -H <span class="hljs-string">"Content-Type: application/json"</span> \
    -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$OPENAI_API_KEY</span>"</span> \
    -d <span class="hljs-string">'{
      "model": "gpt-4o-mini",
      "messages": [
        {
          "role": "user",
          "content": [
            {"type": "text", "text": "What is in this image?"},
            {
              "type": "image_url",
              "detail": "low",
              "image_url": {"url": "https://upload.wikimedia.org/wikipedia/commons/3/34/Correlation_coefficient.png"}
            }
          ]
        }
      ]
    }'</span>
  </code></pre>
  <p>Let's break down the request:</p>
  <ul>
  <li><code>curl https://api.openai.com/v1/chat/completions</code>: The API endpoint for text generation.</li>
  <li><code>-H "Content-Type: application/json"</code>: The content type of the request.</li>
  <li><code>-H "Authorization: Bearer $OPENAI_API_KEY"</code>: The API key for authentication.</li>
  <li><code>-d</code>: The request body.<ul>
  <li><code>"model": "gpt-4o-mini"</code>: The model to use for text generation.</li>
  <li><code>"messages":</code>: The messages to send to the model.<ul>
  <li><code>"role": "user"</code>: The role of the message.</li>
  <li><code>"content":</code>: The content of the message.<ul>
  <li><code>{"type": "text", "text": "What is in this image?"}</code>: The text message.</li>
  <li><code>{"type": "image_url"}</code>: The image message.<ul>
  <li><code>"detail": "low"</code>: The detail level of the image. <code>low</code> uses fewer tokens at lower detail. <code>high</code> uses more tokens for higher detail.</li>
  <li><code>"image_url": {"url": "https://upload.wikimedia.org/wikipedia/commons/3/34/Correlation_coefficient.png"}</code>: The URL of the image.</li>
  </ul>
  </li>
  </ul>
  </li>
  </ul>
  </li>
  </ul>
  </li>
  </ul>
  <p>You can send images in a <a href="base64-image.md" target="_blank" rel="noopener noreferrer">base64 encoded format</a>, too. For example:</p>
  <pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># Download image and convert to base64 in one step</span>
  IMAGE_BASE64=$(curl -s <span class="hljs-string">"https://upload.wikimedia.org/wikipedia/commons/3/34/Correlation_coefficient.png"</span> | <span class="hljs-built_in">base64</span> -w 0)
  
  <span class="hljs-comment"># Send to OpenAI API</span>
  curl https://api.openai.com/v1/chat/completions \
    -H <span class="hljs-string">"Content-Type: application/json"</span> \
    -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$OPENAI_API_KEY</span>"</span> \
    -d @- &lt;&lt; <span class="hljs-string">EOF
  {
    "model": "gpt-4o-mini",
    "messages": [
      {
        "role": "user",
        "content": [
          {"type": "text", "text": "What is in this image?"},
          {
            "type": "image_url",
            "image_url": { "url": "data:image/png;base64,$IMAGE_BASE64" }
          }
        ]
      }
    ]
  }
  EOF</span>
  </code></pre>
  </div><!---->
              <div class="card-body"><!--?lit$772497800$-->
      <p>
        Acme Global Solutions manages hundreds of invoices from vendors every month. To streamline their accounts payable
        process, the company is developing an automated document processing system. This system uses a computer vision
        model to extract useful text from scanned invoice images. Critical pieces of data such as vendor email addresses,
        invoice or transaction numbers, and other details are embedded within these documents.
      </p>
      <p>
        Your team is tasked with integrating OpenAI's vision model into the invoice processing workflow. The chosen model,
        <code>gpt-4o-mini</code>, is capable of analyzing both text and image inputs simultaneously. When an invoice is
        received—for example, an invoice image may contain a vendor email like alice.brown@acmeglobal.com and a
        transaction number such as 34921. The system needs to extract all embedded text to automatically populate the
        vendor management system.
      </p>
      <p>The automated process will send a POST request to OpenAI's API with two inputs in a single user message:</p>
      <ol>
        <li>Text: A simple instruction "Extract text from this image."</li>
        <li>
          Image URL: A base64 URL representing the invoice image that might include the email and the transaction number
          among other details.
        </li>
      </ol>
      <p>Here is an example invoice image:</p>
      <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAAUCAYAAABRY0PiAAAAAXNSR0IArs4c6QAABM9JREFUeF7tnNFuIyEMRZv//+hUUwmJssb3mmGSSff0adUxxj4YfIds83g+v55f/EAAAhCAAAQgAAEIbCPwQGBtY4kjCEAAAhCAAAQg8ENgSWA9Hr/pPYM7MGXTnvdj1ZifgLu5o3ldm5bB4W/mp/k6M48Tb09zZNCeZTGOtaxyukPtr8Q4jlnx8am5R3FXaitj9Rf33R3WmRggAIH/m0BZYDlNTtlEh70aE4mdVT+9uDr+rQTUTECO4nC0c3LaEcsrBdYuUbPLzyhOK0L0k7f+rtpy/Oyy2VHrTiyfvK7EDgEI/B0CJYE1a4r971dsVsZEN1COn3GcGuOIODcWNZdTVo4wcWycuWa3JjtEzBUxXuFzldOV41ZqcmVM9FLj1vpsbItD7YXVeK/kjm8IQAACFQIlgTVz7DS2/mDt/bgfz6kD2W0Go506yNXzyg2K6+uwaz8HHyVgM/uWr8s8s+/nOezG2KLm2/8uyslZ15nfkcuYY1Rzrd5GZmrTRLmPY1yfY85ZnCouxbzP1xXGqt6ivKu3vGovqOeVfecyxA4CEIDATgIvF1iZEMoObqcROzZuc3Abl3vQt+Zb/RgxGpc1wNG+0qhma6PmO5NTZc1mwiQTYE0IjkJPfbyr1rUaS+ZPrbHa8LPaUjnM/EbrnYnHyhpm+8qJV3FXrHgOAQhA4FUETgus2eGqGop6m3YPUudtO4tRxV8RKDPbxqIqRDLhMLs9GkWSyu+s4FR8VPNV4yt15NRMZb7sZcCpO0fAOKI28zOrreq6VkWqI1B377tRJI/i+VWHJvNAAAIQcAggsBb+ilCJhpXGWmlGzdaJ4+4CKxIYTl7OOFdMVRhFNzmV8U7cmbBza2unwFIf/7nrlYllN15HRDsHHzYQgAAEriZwSmA5jcVtcurwdQ5xx8Y9yGdv9Fnzq/JwbkEyfm6+vShw3voze6fBVfNyfDrCxPGzWo/jTZGToyuGVmKKfFdEujveqTHH5t377uqDFP8QgAAE/jnnVr9otComlIDKBI0raj7hoJ815krszbYyxuWvGm9VxLgxqpzeJbCc+J29kPG/g8By8pzlUB2b7eerXmw4+iEAAQi8msDSDZbTUFbeps+OudNB78Ti3IJkgsaZQwkmp+CyOJU4cGNEYP1eibN7oXJjdHYud40rIl/VVcWXU+PYQAACENhNoCywzoqr2dvril/nEFZ+V5+rm5zj+fGT/Wfgqg83335eZ4xqVhWB5eY9Y1Np9g4/9YcF6jZlxq+6tjtvsBzGrsBS9R/xcWpK+V19rtZ89wGJPwhAAAKrBEoCqx3s0WTR9wuNdrPv5HH8Nl+9rfoG9rEJRnGvHvSt8TSfq7FEDaP3uZJv5jNiUrGP4hl/l4mSNr/TpMfmrpqrG4cSXQ4PJ8eZqFJ5KNFX2Qu9bZT37ODIbFdrXQl597mzJ1YPRMZBAAIQ2EWgJLB2TYqf3wSUyBt5Ve0/hfdfzetT+BMnBCAAAQjsI4DA2sfylKfoY59IWEU3UKcmvtFgBNaNFoNQIAABCEDgFAEE1il8+wdXPi7dP/t7PDri8j2RMSsEIAABCEBgjQACa40boyAAAQhAAAIQgMCUAAKL4oAABCAAAQhAAAKbCSCwNgPFHQQgAAEIQAACEPgGo1q6FVaKBmYAAAAASUVORK5CYII="></p>
      <p>
        Write <em>just the JSON body</em> (not the URL, nor headers) for the POST request that sends these two pieces of
        content (text and image URL) to the OpenAI API endpoint.
      </p>
      <ol>
        <li>Use <code>gpt-4o-mini</code> as the model.</li>
        <li>Send a single user message to the model that has a text and an image_url content (in that order).</li>
        <li>The text content should be <code>Extract text from this image</code>.</li>
        <li>Send the image_url as a base64 URL of the image above. <strong>CAREFUL</strong>: Do not modify the image.</li>
      </ol>
  
      <div class="mb-3">
        <label class="form-label" for="q-llm-vision">Write your JSON body here:</label>
        <textarea class="form-control font-monospace text-bg-dark" rows="6" id="q-llm-vision" name="q-llm-vision" disabled=""></textarea><div class="valid-feedback mb-3 comment">Correct!</div>
              <div class="invalid-feedback mb-3 comment">Incorrect. Try again.</div>
      </div>
    </div>
              <div class="card-footer d-flex">
                <button type="button" class="btn btn-primary check-answer" data-question="q-llm-vision" disabled="">Check</button>
              </div>
            </div>
          <!----><!---->
            <div class="card my-5" data-question="q-llm-embeddings" id="hq-llm-embeddings">
              <div class="card-header">
                <span class="badge text-bg-primary me-2"><!--?lit$772497800$-->5</span>
                <!--?lit$772497800$-->LLM Embeddings (<!--?lit$772497800$-->0.75 <!--?lit$772497800$-->marks)
              </div>
              <!--?lit$772497800$--><!----><div class="card-body border-bottom"><!--?lit$772497800$--><h2>Embeddings: OpenAI and Local Models</h2>
  <p>Embedding models convert text into a list of numbers. These are like a map of text in numerical form. Each number represents a feature, and similar texts will have numbers close to each other. So, if the numbers are similar, the text they represent mean something similar.</p>
  <p>This is useful because text similarity is important in many common problems:</p>
  <ol>
  <li><strong>Search</strong>. Find similar documents to a query.</li>
  <li><strong>Classification</strong>. Classify text into categories.</li>
  <li><strong>Clustering</strong>. Group similar items into clusters.</li>
  <li><strong>Anomaly Detection</strong>. Find an unusual piece of text.</li>
  </ol>
  <p>You can run embedding models locally or using an API. Local models are better for privacy and cost. APIs are better for scale and quality.</p>
  <table>
  <thead>
  <tr>
  <th>Feature</th>
  <th>Local Models</th>
  <th>API</th>
  </tr>
  </thead>
  <tbody><tr>
  <td><strong>Privacy</strong></td>
  <td>High</td>
  <td>Dependent on provider</td>
  </tr>
  <tr>
  <td><strong>Cost</strong></td>
  <td>High setup, low after that</td>
  <td>Pay-as-you-go</td>
  </tr>
  <tr>
  <td><strong>Scale</strong></td>
  <td>Limited by local resources</td>
  <td>Easily scales with demand</td>
  </tr>
  <tr>
  <td><strong>Quality</strong></td>
  <td>Varies by model</td>
  <td>Typically high</td>
  </tr>
  </tbody></table>
  <p>The <a href="https://huggingface.co/spaces/mteb/leaderboard" target="_blank" rel="noopener noreferrer">Massive Text Embedding Benchmark (MTEB)</a> provides comprehensive comparisons of embedding models. These models are compared on several parameters, but here are some key ones to look at:</p>
  <ol>
  <li><strong>Rank</strong>. Higher ranked models have higher quality.</li>
  <li><strong>Memory Usage</strong>. Lower is better (for similar ranks). It costs less and is faster to run.</li>
  <li><strong>Embedding Dimensions</strong>. Lower is better. This is the number of numbers in the array. Smaller dimensions are cheaper to store.</li>
  <li><strong>Max Tokens</strong>. Higher is better. This is the number of input tokens (words) the model can take in a <em>single</em> input.</li>
  <li>Look for higher scores in the columns for Classification, Clustering, Summarization, etc. based on your needs.</li>
  </ol>
  <h3>Local Embeddings</h3>
  <p><a href="https://youtu.be/OATCgQtNX2o" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi/OATCgQtNX2o/sddefault.jpg" alt="Guide to Local Embeddings with Sentence Transformers" class="img-fluid"></a></p>
  <p>Here's a minimal example using a local embedding model:</p>
  <pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># /// script</span>
  <span class="hljs-comment"># requires-python = "==3.12"</span>
  <span class="hljs-comment"># dependencies = [</span>
  <span class="hljs-comment">#   "sentence-transformers",</span>
  <span class="hljs-comment">#   "httpx",</span>
  <span class="hljs-comment">#   "numpy",</span>
  <span class="hljs-comment"># ]</span>
  <span class="hljs-comment"># ///</span>
  
  <span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer
  <span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
  
  model = SentenceTransformer(<span class="hljs-string">'BAAI/bge-base-en-v1.5'</span>)  <span class="hljs-comment"># A small, high quality model</span>
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">embed</span>(<span class="hljs-params">text: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">float</span>]:
      <span class="hljs-string">"""Get embedding vector for text using local model."""</span>
      <span class="hljs-keyword">return</span> model.encode(text).tolist()
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_similarity</span>(<span class="hljs-params">text1: <span class="hljs-built_in">str</span>, text2: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">float</span>:
      <span class="hljs-string">"""Calculate cosine similarity between two texts."""</span>
      emb1 = np.array(<span class="hljs-keyword">await</span> embed(text1))
      emb2 = np.array(<span class="hljs-keyword">await</span> embed(text2))
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">float</span>(np.dot(emb1, emb2) / (np.linalg.norm(emb1) * np.linalg.norm(emb2)))
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
      <span class="hljs-built_in">print</span>(<span class="hljs-keyword">await</span> get_similarity(<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Orange"</span>))
      <span class="hljs-built_in">print</span>(<span class="hljs-keyword">await</span> get_similarity(<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Lightning"</span>))
  
  
  <span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
      <span class="hljs-keyword">import</span> asyncio
      asyncio.run(main())
  </code></pre>
  <p>Note the <code>get_similarity</code> function. It uses a <a href="https://en.wikipedia.org/wiki/Cosine_similarity" target="_blank" rel="noopener noreferrer">Cosine Similarity</a> to calculate the similarity between two embeddings.</p>
  <h3>OpenAI Embeddings</h3>
  <p>For comparison, here's how to use OpenAI's API with direct HTTP calls. Replace the <code>embed</code> function in the earlier script:</p>
  <pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-keyword">import</span> os
  <span class="hljs-keyword">import</span> httpx
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">embed</span>(<span class="hljs-params">text: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">float</span>]:
      <span class="hljs-string">"""Get embedding vector for text using OpenAI's API."""</span>
      <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient() <span class="hljs-keyword">as</span> client:
          response = <span class="hljs-keyword">await</span> client.post(
              <span class="hljs-string">"https://api.openai.com/v1/embeddings"</span>,
              headers={<span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Bearer <span class="hljs-subst">{os.environ[<span class="hljs-string">'OPENAI_API_KEY'</span>]}</span>"</span>},
              json={<span class="hljs-string">"model"</span>: <span class="hljs-string">"text-embedding-3-small"</span>, <span class="hljs-string">"input"</span>: text}
          )
          <span class="hljs-keyword">return</span> response.json()[<span class="hljs-string">"data"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"embedding"</span>]
  </code></pre>
  <p><strong>NOTE</strong>: You need to set the <code>OPENAI_API_KEY</code> environment variable for this to work.</p>
  </div><!---->
              <div class="card-body"><!--?lit$772497800$-->
      <p>
        <strong>SecurePay</strong>, a leading fintech startup, has implemented an innovative feature to detect and prevent
        fraudulent activities in real time. As part of its security suite, the system analyzes personalized transaction
        messages by converting them into embeddings. These embeddings are compared against known patterns of legitimate
        and fraudulent messages to flag unusual activity.
      </p>
      <p>
        Imagine you are working on the SecurePay team as a junior developer tasked with integrating the text embeddings
        feature into the fraud detection module. When a user initiates a transaction, the system sends a personalized
        verification message to the user's registered email address. This message includes the user's email address and a
        unique transaction code (a randomly generated number). Here are 2 verification messages:
      </p>
      <pre><code data-highlighted="yes" class="hljs language-stylus">Dear user, please verify your transaction <span class="hljs-selector-tag">code</span> <span class="hljs-number">89426</span> sent to <span class="hljs-number">22</span>f2001103@ds<span class="hljs-selector-class">.study</span><span class="hljs-selector-class">.iitm</span><span class="hljs-selector-class">.ac</span>.<span class="hljs-keyword">in</span></code></pre>
      <pre><code data-highlighted="yes" class="hljs language-stylus">Dear user, please verify your transaction <span class="hljs-selector-tag">code</span> <span class="hljs-number">30972</span> sent to <span class="hljs-number">22</span>f2001103@ds<span class="hljs-selector-class">.study</span><span class="hljs-selector-class">.iitm</span><span class="hljs-selector-class">.ac</span>.<span class="hljs-keyword">in</span></code></pre>
      <p>
        The goal is to capture this message, convert it into a meaningful embedding using OpenAI's
        <code>text-embedding-3-small</code> model, and subsequently use the embedding in a machine learning model to
        detect anomalies.
      </p>
      <p>
        Your task is to write the JSON body for a POST request that will be sent to the OpenAI API endpoint to obtain the
        text embedding for the 2 given personalized transaction verification messages above. This will be sent to the
        endpoint
        <code>https://api.openai.com/v1/embeddings</code>.
      </p>
  
      <div class="mb-3">
        <label class="form-label" for="q-llm-embeddings">Write your JSON body here:</label>
        <textarea class="form-control font-monospace text-bg-dark" rows="6" id="q-llm-embeddings" name="q-llm-embeddings" disabled=""></textarea><div class="valid-feedback mb-3 comment">Correct!</div>
              <div class="invalid-feedback mb-3 comment">Incorrect. Try again.</div>
      </div>
    </div>
              <div class="card-footer d-flex">
                <button type="button" class="btn btn-primary check-answer" data-question="q-llm-embeddings" disabled="">Check</button>
              </div>
            </div>
          <!----><!---->
            <div class="card my-5" data-question="q-embedding-similarity" id="hq-embedding-similarity">
              <div class="card-header">
                <span class="badge text-bg-primary me-2"><!--?lit$772497800$-->6</span>
                <!--?lit$772497800$-->Embedding Similarity (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)
              </div>
              <!--?lit$772497800$--><!----><div class="card-body border-bottom"><!--?lit$772497800$--><h2>Topic Modeling</h2>
  <p><a href="https://youtu.be/eQUNhq91DlI" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi_webp/eQUNhq91DlI/sddefault.webp" alt="LLM Topic Modeling" class="img-fluid"></a></p>
  <p>You'll learn to use text embeddings to find text similarity and use that to create topics automatically from text, covering:</p>
  <ul>
  <li><strong>Embeddings</strong>: How large language models convert text into numerical representations.</li>
  <li><strong>Similarity Measurement</strong>: Understanding how similar embeddings indicate similar meanings.</li>
  <li><strong>Embedding Visualization</strong>: Using tools like Tensorflow Projector to visualize embedding spaces.</li>
  <li><strong>Embedding Applications</strong>: Using embeddings for tasks like classification and clustering.</li>
  <li><strong>OpenAI Embeddings</strong>: Using OpenAI's API to generate embeddings for text.</li>
  <li><strong>Model Comparison</strong>: Exploring different embedding models and their strengths and weaknesses.</li>
  <li><strong>Cosine Similarity</strong>: Calculating cosine similarity between embeddings for more reliable similarity measures.</li>
  <li><strong>Embedding Cost</strong>: Understanding the cost of generating embeddings using OpenAI's API.</li>
  <li><strong>Embedding Range</strong>: Understanding the range of values in embeddings and their significance.</li>
  </ul>
  <p>Here are the links used in the video:</p>
  <ul>
  <li><a href="https://colab.research.google.com/drive/15L075RLrwXkxa29EGT-1sNm_dqJRBTe_" target="_blank" rel="noopener noreferrer">Jupyter Notebook</a></li>
  <li><a href="https://projector.tensorflow.org/" target="_blank" rel="noopener noreferrer">Tensorflow projector</a></li>
  <li><a href="https://platform.openai.com/docs/guides/embeddings" target="_blank" rel="noopener noreferrer">Embeddings guide</a></li>
  <li><a href="https://platform.openai.com/docs/api-reference/embeddings" target="_blank" rel="noopener noreferrer">Embeddings reference</a></li>
  <li><a href="https://scikit-learn.org/stable/modules/clustering.html" target="_blank" rel="noopener noreferrer">Clustering on scikit-learn</a></li>
  <li><a href="https://huggingface.co/spaces/mteb/leaderboard" target="_blank" rel="noopener noreferrer">Massive text embedding leaderboard (MTEB)</a></li>
  <li><a href="https://huggingface.co/Alibaba-NLP/gte-large-en-v1.5" target="_blank" rel="noopener noreferrer"><code>gte-large-en-v1.5</code> embedding model</a></li>
  <li><a href="https://www.s-anand.net/blog/embeddings-similarity-threshold/" target="_blank" rel="noopener noreferrer">Embeddings similarity threshold</a></li>
  </ul>
  </div><!---->
              <div class="card-body"><!--?lit$772497800$-->
      <p>
        ShopSmart is an online retail platform that places a high value on customer feedback. Each month, the company
        receives hundreds of comments from shoppers regarding product quality, delivery speed, customer service, and more.
        To automatically understand and cluster this feedback, ShopSmart's data science team uses text embeddings to
        capture the semantic meaning behind each comment.
      </p>
      <p>
        As part of a pilot project, ShopSmart has curated a collection of 25 feedback phrases that represent a variety of
        customer sentiments. Examples of these phrases include comments like “Fast shipping and great service,” “Product
        quality could be improved,” “Excellent packaging,” and so on. Due to limited processing capacity during initial
        testing, you have been tasked with determine which pair(s) of 5 of these phrases are most similar to each other.
        This similarity analysis will help in grouping similar feedback to enhance the company’s understanding of
        recurring customer issues.
      </p>
      <p>
        ShopSmart has written a Python program that has the 5 phrases and their embeddings as an array of floats. It looks
        like this:
      </p>
      <pre><code class="language-python hljs" data-highlighted="yes">embeddings = {<span class="hljs-string">"Fast shipping and great service."</span>:[-<span class="hljs-number">0.1079404279589653</span>,<span class="hljs-number">0.020684150978922844</span>,-<span class="hljs-number">0.30074435472488403</span>,<span class="hljs-number">0.11729881167411804</span>,<span class="hljs-number">0.13952496647834778</span>,-<span class="hljs-number">0.018052106723189354</span>,-<span class="hljs-number">0.21843314170837402</span>,<span class="hljs-number">0.13527116179466248</span>,-<span class="hljs-number">0.09257353842258453</span>,-<span class="hljs-number">0.09384968131780624</span>,<span class="hljs-number">0.11293865740299225</span>,-<span class="hljs-number">0.03900212049484253</span>,-<span class="hljs-number">0.059287477284669876</span>,-<span class="hljs-number">0.1008152961730957</span>,-<span class="hljs-number">0.019155437126755714</span>,-<span class="hljs-number">0.007078605704009533</span>,-<span class="hljs-number">0.02967032417654991</span>,<span class="hljs-number">0.03711449354887009</span>,-<span class="hljs-number">0.18302017450332642</span>,<span class="hljs-number">0.20056714117527008</span>,<span class="hljs-number">0.09076566994190216</span>,<span class="hljs-number">0.02584189549088478</span>,<span class="hljs-number">0.0943814069032669</span>,-<span class="hljs-number">0.03799184039235115</span>,-<span class="hljs-number">0.25246360898017883</span>,-<span class="hljs-number">0.1235731765627861</span>,<span class="hljs-number">0.028952494263648987</span>,-<span class="hljs-number">0.309251993894577</span>,<span class="hljs-number">0.021375395357608795</span>,-<span class="hljs-number">0.22204887866973877</span>,<span class="hljs-number">0.2159872055053711</span>,-<span class="hljs-number">0.11921302229166031</span>,<span class="hljs-number">0.21928390860557556</span>,-<span class="hljs-number">0.11432114243507385</span>,<span class="hljs-number">0.017453914508223534</span>,<span class="hljs-number">0.10065577924251556</span>,-<span class="hljs-number">0.04200637340545654</span>,<span class="hljs-number">0.17493793368339539</span>,<span class="hljs-number">0.1322934925556183</span>,<span class="hljs-number">0.17025874555110931</span>,-<span class="hljs-number">0.15271177887916565</span>,<span class="hljs-number">0.004682514350861311</span>,<span class="hljs-number">0.2531017065048218</span>,<span class="hljs-number">0.11580997705459595</span>,<span class="hljs-number">0.014688937924802303</span>,-<span class="hljs-number">0.11176885664463043</span>,-<span class="hljs-number">0.292662113904953</span>,-<span class="hljs-number">0.0397731214761734</span>,<span class="hljs-number">0.13729171454906464</span>,<span class="hljs-number">0.027570005506277084</span>],<span class="hljs-string">"Great selection, but the size options were limited."</span>:[<span class="hljs-number">0.11335355788469315</span>,-<span class="hljs-number">0.06627686321735382</span>,-<span class="hljs-number">0.05730358883738518</span>,-<span class="hljs-number">0.1772221475839615</span>,-<span class="hljs-number">0.190682053565979</span>,-<span class="hljs-number">0.14000946283340454</span>,-<span class="hljs-number">0.03737764060497284</span>,<span class="hljs-number">0.0863017737865448</span>,-<span class="hljs-number">0.22301223874092102</span>,<span class="hljs-number">0.06462736427783966</span>,-<span class="hljs-number">0.09197605401277542</span>,-<span class="hljs-number">0.31960687041282654</span>,-<span class="hljs-number">0.15175388753414154</span>,<span class="hljs-number">0.0831347405910492</span>,<span class="hljs-number">0.049550943076610565</span>,<span class="hljs-number">0.012775368057191372</span>,<span class="hljs-number">0.0678933709859848</span>,-<span class="hljs-number">0.05585202947258949</span>,-<span class="hljs-number">0.21390700340270996</span>,<span class="hljs-number">0.144364133477211</span>,<span class="hljs-number">0.024148661643266678</span>,<span class="hljs-number">0.023455873131752014</span>,<span class="hljs-number">0.00280002411454916</span>,-<span class="hljs-number">0.10734938085079193</span>,<span class="hljs-number">0.09131625294685364</span>,-<span class="hljs-number">0.033814724534749985</span>,-<span class="hljs-number">0.006305208895355463</span>,<span class="hljs-number">0.012156805954873562</span>,<span class="hljs-number">0.2611486613750458</span>,<span class="hljs-number">0.13492900133132935</span>,<span class="hljs-number">0.015051675960421562</span>,-<span class="hljs-number">0.15597660839557648</span>,-<span class="hljs-number">0.06363766640424728</span>,-<span class="hljs-number">0.26695486903190613</span>,-<span class="hljs-number">0.37318259477615356</span>,<span class="hljs-number">0.018375417217612267</span>,<span class="hljs-number">0.1467394083738327</span>,<span class="hljs-number">0.13473105430603027</span>,<span class="hljs-number">0.1976759284734726</span>,<span class="hljs-number">0.14555177092552185</span>,<span class="hljs-number">0.13235577940940857</span>,-<span class="hljs-number">0.006663974840193987</span>,<span class="hljs-number">0.15043428540229797</span>,<span class="hljs-number">0.08029760420322418</span>,<span class="hljs-number">0.20229452848434448</span>,<span class="hljs-number">0.0745573416352272</span>,-<span class="hljs-number">0.00456498796120286</span>,-<span class="hljs-number">0.08656569570302963</span>,-<span class="hljs-number">0.25006401538848877</span>,-<span class="hljs-number">0.022977517917752266</span>],<span class="hljs-string">"The quality exceeds the price."</span>:[-<span class="hljs-number">0.050457071512937546</span>,-<span class="hljs-number">0.034066375344991684</span>,-<span class="hljs-number">0.10696785151958466</span>,-<span class="hljs-number">0.03518003225326538</span>,<span class="hljs-number">0.11867549270391464</span>,-<span class="hljs-number">0.08566565811634064</span>,-<span class="hljs-number">0.017789902165532112</span>,<span class="hljs-number">0.3559122681617737</span>,-<span class="hljs-number">0.04817265644669533</span>,-<span class="hljs-number">0.14437519013881683</span>,<span class="hljs-number">0.14620272815227509</span>,<span class="hljs-number">0.015005768276751041</span>,-<span class="hljs-number">0.34517550468444824</span>,<span class="hljs-number">0.022687122225761414</span>,<span class="hljs-number">0.2908063530921936</span>,<span class="hljs-number">0.17681391537189484</span>,-<span class="hljs-number">0.20993797481060028</span>,-<span class="hljs-number">0.286237508058548</span>,-<span class="hljs-number">0.022829897701740265</span>,<span class="hljs-number">0.04428914561867714</span>,<span class="hljs-number">0.08435212075710297</span>,<span class="hljs-number">0.04840109869837761</span>,-<span class="hljs-number">0.03081108257174492</span>,-<span class="hljs-number">0.04203328490257263</span>,-<span class="hljs-number">0.0324387289583683</span>,-<span class="hljs-number">0.23552344739437103</span>,<span class="hljs-number">0.0033713006414473057</span>,<span class="hljs-number">0.02891216054558754</span>,<span class="hljs-number">0.0676758736371994</span>,-<span class="hljs-number">0.11616263538599014</span>,<span class="hljs-number">0.05408358573913574</span>,-<span class="hljs-number">0.18183964490890503</span>,<span class="hljs-number">0.23757942020893097</span>,-<span class="hljs-number">0.34266263246536255</span>,-<span class="hljs-number">0.19920121133327484</span>,-<span class="hljs-number">0.021787632256746292</span>,<span class="hljs-number">0.0973161906003952</span>,<span class="hljs-number">0.032724279910326004</span>,<span class="hljs-number">0.07030294835567474</span>,-<span class="hljs-number">0.1132500022649765</span>,<span class="hljs-number">0.09360401332378387</span>,<span class="hljs-number">0.028341054916381836</span>,-<span class="hljs-number">0.09657375514507294</span>,<span class="hljs-number">0.1291838139295578</span>,<span class="hljs-number">0.12198790162801743</span>,<span class="hljs-number">0.019260495901107788</span>,<span class="hljs-number">0.02211601845920086</span>,<span class="hljs-number">0.058595310896635056</span>,-<span class="hljs-number">0.07481467723846436</span>,<span class="hljs-number">0.012935514561831951</span>],<span class="hljs-string">"Customer service resolved my issue quickly."</span>:[-<span class="hljs-number">0.27243417501449585</span>,-<span class="hljs-number">0.08034132421016693</span>,-<span class="hljs-number">0.3335980772972107</span>,<span class="hljs-number">0.03278002515435219</span>,-<span class="hljs-number">0.0688093826174736</span>,-<span class="hljs-number">0.11652996391057968</span>,-<span class="hljs-number">0.13710907101631165</span>,<span class="hljs-number">0.2432539016008377</span>,<span class="hljs-number">0.07779283076524734</span>,<span class="hljs-number">0.0949951708316803</span>,<span class="hljs-number">0.1365993618965149</span>,-<span class="hljs-number">0.05979407951235771</span>,-<span class="hljs-number">0.17151375114917755</span>,-<span class="hljs-number">0.040170662105083466</span>,<span class="hljs-number">0.12054384499788284</span>,<span class="hljs-number">0.10894818603992462</span>,-<span class="hljs-number">0.1374913454055786</span>,-<span class="hljs-number">0.008736561983823776</span>,-<span class="hljs-number">0.2501348555088043</span>,<span class="hljs-number">0.040648505091667175</span>,<span class="hljs-number">0.20974119007587433</span>,<span class="hljs-number">0.021232154220342636</span>,<span class="hljs-number">0.1484498679637909</span>,-<span class="hljs-number">0.07186757773160934</span>,-<span class="hljs-number">0.26733720302581787</span>,<span class="hljs-number">0.24248935282230377</span>,-<span class="hljs-number">0.04475795477628708</span>,-<span class="hljs-number">0.1304829716682434</span>,-<span class="hljs-number">0.11914216727018356</span>,-<span class="hljs-number">0.2516639530658722</span>,<span class="hljs-number">0.16577963531017303</span>,-<span class="hljs-number">0.1684555560350418</span>,-<span class="hljs-number">0.08875136077404022</span>,-<span class="hljs-number">0.1995472013950348</span>,-<span class="hljs-number">0.10072928667068481</span>,<span class="hljs-number">0.1209898293018341</span>,<span class="hljs-number">0.11015872657299042</span>,-<span class="hljs-number">0.053359128534793854</span>,<span class="hljs-number">0.16705389320850372</span>,<span class="hljs-number">0.0013867400120943785</span>,-<span class="hljs-number">0.018269527703523636</span>,<span class="hljs-number">0.014486604370176792</span>,<span class="hljs-number">0.08320838212966919</span>,<span class="hljs-number">0.06033563241362572</span>,-<span class="hljs-number">0.07224985212087631</span>,<span class="hljs-number">0.09869049489498138</span>,-<span class="hljs-number">0.021837422624230385</span>,<span class="hljs-number">0.1448819786310196</span>,<span class="hljs-number">0.10996758937835693</span>,<span class="hljs-number">0.058328691869974136</span>],<span class="hljs-string">"There was a delay in delivery."</span>:[<span class="hljs-number">0.14162038266658783</span>,<span class="hljs-number">0.133348748087883</span>,-<span class="hljs-number">0.04399004951119423</span>,-<span class="hljs-number">0.10571397840976715</span>,-<span class="hljs-number">0.12250789999961853</span>,<span class="hljs-number">0.039634909480810165</span>,<span class="hljs-number">0.010010556317865849</span>,<span class="hljs-number">0.028512069955468178</span>,-<span class="hljs-number">0.011859141290187836</span>,-<span class="hljs-number">0.11755745112895966</span>,-<span class="hljs-number">0.011624150909483433</span>,-<span class="hljs-number">0.05646016448736191</span>,-<span class="hljs-number">0.07576064020395279</span>,-<span class="hljs-number">0.26845210790634155</span>,-<span class="hljs-number">0.060000672936439514</span>,-<span class="hljs-number">0.07820453494787216</span>,<span class="hljs-number">0.04865850880742073</span>,-<span class="hljs-number">0.1497666984796524</span>,-<span class="hljs-number">0.28549668192863464</span>,<span class="hljs-number">0.24902629852294922</span>,<span class="hljs-number">0.0857868641614914</span>,<span class="hljs-number">0.053608957678079605</span>,<span class="hljs-number">0.24727170169353485</span>,<span class="hljs-number">0.0352797694504261</span>,-<span class="hljs-number">0.16643528640270233</span>,-<span class="hljs-number">0.060595981776714325</span>,<span class="hljs-number">0.1174321249127388</span>,-<span class="hljs-number">0.17596019804477692</span>,<span class="hljs-number">0.04847051948308945</span>,<span class="hljs-number">0.14939071238040924</span>,<span class="hljs-number">0.12282121926546097</span>,-<span class="hljs-number">0.10019955784082413</span>,<span class="hljs-number">0.23448826372623444</span>,-<span class="hljs-number">0.22408606112003326</span>,-<span class="hljs-number">0.16217415034770966</span>,<span class="hljs-number">0.1520226001739502</span>,-<span class="hljs-number">0.0021325305569916964</span>,<span class="hljs-number">0.19927117228507996</span>,<span class="hljs-number">0.15578243136405945</span>,<span class="hljs-number">0.1492653787136078</span>,-<span class="hljs-number">0.26845210790634155</span>,-<span class="hljs-number">0.1048993468284607</span>,-<span class="hljs-number">0.11906138807535172</span>,-<span class="hljs-number">0.012994923628866673</span>,-<span class="hljs-number">0.07444469630718231</span>,<span class="hljs-number">0.22797122597694397</span>,-<span class="hljs-number">0.05166637524962425</span>,-<span class="hljs-number">0.07469535619020462</span>,-<span class="hljs-number">0.009728568606078625</span>,<span class="hljs-number">0.23611752688884735</span>]}</code></pre>
      <p>
        Your task is to write a Python function <code>most_similar(embeddings)</code> that will calculate the cosine
        similarity between each pair of these embeddings and return the pair that has the highest similarity. The result
        should be a tuple of the two phrases that are most similar.
      </p>
  
      <div class="mb-3">
        <label class="form-label" for="q-embedding-similarity">Write your Python code here:</label>
        <textarea class="form-control font-monospace text-bg-dark" rows="6" id="q-embedding-similarity" name="q-embedding-similarity" disabled="">import numpy
  
  
  def most_similar(embeddings):
      # Your code here
      return (phrase1, phrase2)
  </textarea><div class="valid-feedback mb-3 comment">Correct!</div>
              <div class="invalid-feedback mb-3 comment">Incorrect. Try again.</div>
      </div>
    </div>
              <div class="card-footer d-flex">
                <button type="button" class="btn btn-primary check-answer" data-question="q-embedding-similarity" disabled="">Check</button>
              </div>
            </div>
          <!----><!---->
            <div class="card my-5" data-question="q-vector-databases" id="hq-vector-databases">
              <div class="card-header">
                <span class="badge text-bg-primary me-2"><!--?lit$772497800$-->7</span>
                <!--?lit$772497800$-->Vector Databases (<!--?lit$772497800$-->1.5 <!--?lit$772497800$-->marks)
              </div>
              <!--?lit$772497800$--><!----><div class="card-body border-bottom"><!--?lit$772497800$--><h2>Vector Databases</h2>
  <p>Vector databases are specialized databases that store and search vector embeddings efficiently.</p>
  <p>Use vector databases when your embeddings exceed available memory or when you want it run fast at scale. (This is important. If your code runs fast and fits in memory, you <strong>DON'T</strong> need a vector database. You can can use <code>numpy</code> for these tasks.)</p>
  <p>Vector databases are an evolving space.</p>
  <p>The first generation of vector databases were written in C and typically used an algorithm called <a href="https://en.wikipedia.org/wiki/Hierarchical_navigable_small_world" target="_blank" rel="noopener noreferrer">HNSW</a> (a way to approximately find the nearest neighbor). Some popular ones are:</p>
  <ul>
  <li><strong><a href="https://docs.trychroma.com/" target="_blank" rel="noopener noreferrer">Chroma</a></strong>: Combines a vector index with a SQLite database. Easy to install, most popular.</li>
  <li><strong><a href="https://lancedb.github.io/lancedb/" target="_blank" rel="noopener noreferrer">LanceDB</a></strong>: Written in Rust. Faster, easy to install, growing popular.</li>
  <li><strong><a href="https://github.com/facebookresearch/faiss" target="_blank" rel="noopener noreferrer">FAISS</a></strong>: Meta's lightweight library</li>
  <li><strong><a href="https://milvus.io/" target="_blank" rel="noopener noreferrer">Milvus</a></strong>: Distributed, cloud-native</li>
  </ul>
  <p>In addition, most relational databases now support vector search. For example:</p>
  <ul>
  <li><strong><a href="https://duckdb.org/" target="_blank" rel="noopener noreferrer">DuckDB</a></strong>: Supports vector search with <a href="https://duckdb.org/docs/extensions/vss.html" target="_blank" rel="noopener noreferrer"><code>vss</code></a>.</li>
  <li><strong><a href="https://www.sqlite.org/" target="_blank" rel="noopener noreferrer">SQLite</a></strong>: Supports vector search with <a href="https://github.com/asg017/sqlite-vec" target="_blank" rel="noopener noreferrer"><code>sqlite-vec</code></a>.</li>
  <li><strong><a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL</a></strong>: Supports vector search with <a href="https://github.com/pgvector/pgvector" target="_blank" rel="noopener noreferrer"><code>pgvector</code></a>.</li>
  </ul>
  <p>Take a look at this <a href="https://superlinked.com/vector-db-comparison" target="_blank" rel="noopener noreferrer">Vector DB Comparison</a>.</p>
  <p>Watch this Vector Database Tutorial (3 min):</p>
  <p><a href="https://youtu.be/klTvEwg3oJ4" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi/klTvEwg3oJ4/sddefault.jpg" alt="Vector databases are so hot right now. WTF are they? (3 min)" class="img-fluid"></a></p>
  <h3>ChromaDB</h3>
  <p>Here's a minimal example using Chroma:</p>
  <pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># /// script</span>
  <span class="hljs-comment"># requires-python = "==3.12"</span>
  <span class="hljs-comment"># dependencies = [</span>
  <span class="hljs-comment">#   "chromadb",</span>
  <span class="hljs-comment">#   "sentence-transformers",</span>
  <span class="hljs-comment"># ]</span>
  <span class="hljs-comment"># ///</span>
  
  <span class="hljs-keyword">import</span> chromadb
  <span class="hljs-keyword">from</span> chromadb.utils <span class="hljs-keyword">import</span> embedding_functions
  <span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_vector_db</span>():
      <span class="hljs-string">"""Initialize Chroma DB with an embedding function."""</span>
      sentence_transformer_ef = embedding_functions.SentenceTransformerEmbeddingFunction(
          model_name=<span class="hljs-string">"BAAI/bge-base-en-v1.5"</span>
      )
      client = chromadb.PersistentClient(path=<span class="hljs-string">"./vector_db"</span>)
      collection = client.create_collection(
          name=<span class="hljs-string">"documents"</span>,
          embedding_function=sentence_transformer_ef
      )
      <span class="hljs-keyword">return</span> collection
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">search_similar</span>(<span class="hljs-params">collection, query: <span class="hljs-built_in">str</span>, n_results: <span class="hljs-built_in">int</span> = <span class="hljs-number">3</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>]:
      <span class="hljs-string">"""Search for documents similar to the query."""</span>
      d = collection.query(query_texts=[query], n_results=n_results)
      <span class="hljs-keyword">return</span> [
          {<span class="hljs-string">"id"</span>: <span class="hljs-built_in">id</span>, <span class="hljs-string">"text"</span>: text, <span class="hljs-string">"distance"</span>: distance}
          <span class="hljs-keyword">for</span> <span class="hljs-built_in">id</span>, text, distance <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(d[<span class="hljs-string">"ids"</span>][<span class="hljs-number">0</span>], d[<span class="hljs-string">"documents"</span>][<span class="hljs-number">0</span>], d[<span class="hljs-string">"distances"</span>][<span class="hljs-number">0</span>])
      ]
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
      collection = <span class="hljs-keyword">await</span> setup_vector_db()
  
      <span class="hljs-comment"># Add some documents</span>
      collection.add(
          documents=[<span class="hljs-string">"Apple is a fruit"</span>, <span class="hljs-string">"Orange is citrus"</span>, <span class="hljs-string">"Computer is electronic"</span>],
          ids=[<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>, <span class="hljs-string">"3"</span>]
      )
  
      <span class="hljs-comment"># Search</span>
      results = <span class="hljs-keyword">await</span> search_similar(collection, <span class="hljs-string">"fruit"</span>)
      <span class="hljs-built_in">print</span>(results)
  
  <span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
      <span class="hljs-keyword">import</span> asyncio
      asyncio.run(main())
  </code></pre>
  <h3>LanceDB</h3>
  <p>Here's the same example using LanceDB:</p>
  <pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># /// script</span>
  <span class="hljs-comment"># requires-python = "==3.12"</span>
  <span class="hljs-comment"># dependencies = [</span>
  <span class="hljs-comment">#   "lancedb",</span>
  <span class="hljs-comment">#   "pyarrow",</span>
  <span class="hljs-comment">#   "sentence-transformers",</span>
  <span class="hljs-comment"># ]</span>
  <span class="hljs-comment"># ///</span>
  
  <span class="hljs-keyword">import</span> lancedb
  <span class="hljs-keyword">import</span> pyarrow <span class="hljs-keyword">as</span> pa
  <span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_vector_db</span>():
      <span class="hljs-string">"""Initialize LanceDB with an embedding function."""</span>
      model = SentenceTransformer(<span class="hljs-string">"BAAI/bge-base-en-v1.5"</span>)
      db = lancedb.connect(<span class="hljs-string">"./vector_db"</span>)
  
      <span class="hljs-comment"># Create table with schema for documents</span>
      table = db.create_table(
          <span class="hljs-string">"documents"</span>,
          schema=pa.schema([
              pa.field(<span class="hljs-string">"id"</span>, pa.string()),
              pa.field(<span class="hljs-string">"text"</span>, pa.string()),
              pa.field(<span class="hljs-string">"vector"</span>, pa.list_(pa.float32(), list_size=<span class="hljs-number">768</span>))
          ])
      )
      <span class="hljs-keyword">return</span> table, model
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">search_similar</span>(<span class="hljs-params">table, model, query: <span class="hljs-built_in">str</span>, n_results: <span class="hljs-built_in">int</span> = <span class="hljs-number">3</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>]:
      <span class="hljs-string">"""Search for documents similar to the query."""</span>
      query_embedding = model.encode(query)
      results = table.search(query_embedding).limit(n_results).to_list()
      <span class="hljs-keyword">return</span> [{<span class="hljs-string">"id"</span>: r[<span class="hljs-string">"id"</span>], <span class="hljs-string">"text"</span>: r[<span class="hljs-string">"text"</span>], <span class="hljs-string">"distance"</span>: <span class="hljs-built_in">float</span>(r[<span class="hljs-string">"_distance"</span>])} <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results]
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
      table, model = <span class="hljs-keyword">await</span> setup_vector_db()
  
      <span class="hljs-comment"># Add some documents</span>
      documents = [<span class="hljs-string">"Apple is a fruit"</span>, <span class="hljs-string">"Orange is citrus"</span>, <span class="hljs-string">"Computer is electronic"</span>]
      embeddings = model.encode(documents)
  
      table.add(data=[
          {<span class="hljs-string">"id"</span>: <span class="hljs-built_in">str</span>(i), <span class="hljs-string">"text"</span>: text, <span class="hljs-string">"vector"</span>: embedding}
          <span class="hljs-keyword">for</span> i, (text, embedding) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(documents, embeddings), <span class="hljs-number">1</span>)
      ])
  
      <span class="hljs-comment"># Search</span>
      results = <span class="hljs-keyword">await</span> search_similar(table, model, <span class="hljs-string">"fruit"</span>)
      <span class="hljs-built_in">print</span>(results)
  
  <span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
      <span class="hljs-keyword">import</span> asyncio
      asyncio.run(main())
  </code></pre>
  <h3>DuckDB</h3>
  <p>Here's the same example using DuckDB:</p>
  <pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># /// script</span>
  <span class="hljs-comment"># requires-python = "==3.12"</span>
  <span class="hljs-comment"># dependencies = [</span>
  <span class="hljs-comment">#   "duckdb",</span>
  <span class="hljs-comment">#   "sentence-transformers",</span>
  <span class="hljs-comment"># ]</span>
  <span class="hljs-comment"># ///</span>
  
  <span class="hljs-keyword">import</span> duckdb
  <span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_vector_db</span>() -&gt; <span class="hljs-built_in">tuple</span>[duckdb.DuckDBPyConnection, SentenceTransformer]:
      <span class="hljs-string">"""Initialize DuckDB with VSS extension and embedding model."""</span>
      <span class="hljs-comment"># Initialize model</span>
      model = SentenceTransformer(<span class="hljs-string">"BAAI/bge-base-en-v1.5"</span>)
      vector_dim = model.get_sentence_embedding_dimension()
  
      <span class="hljs-comment"># Setup DuckDB with VSS extension</span>
      conn = duckdb.connect(<span class="hljs-string">":memory:"</span>)
      conn.install_extension(<span class="hljs-string">"vss"</span>)
      conn.load_extension(<span class="hljs-string">"vss"</span>)
  
      <span class="hljs-comment"># Create table with vector column</span>
      conn.execute(<span class="hljs-string">f"""
          CREATE TABLE documents (
              id VARCHAR,
              text VARCHAR,
              vector FLOAT[<span class="hljs-subst">{vector_dim}</span>]
          )
      """</span>)
  
      <span class="hljs-comment"># Create HNSW index for vector similarity search</span>
      conn.execute(<span class="hljs-string">"CREATE INDEX vector_idx ON documents USING HNSW (vector)"</span>)
      <span class="hljs-keyword">return</span> conn, model
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">search_similar</span>(<span class="hljs-params">conn: duckdb.DuckDBPyConnection, model: SentenceTransformer,
                          query: <span class="hljs-built_in">str</span>, n_results: <span class="hljs-built_in">int</span> = <span class="hljs-number">3</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>]:
      <span class="hljs-string">"""Search for documents similar to query using vector similarity."""</span>
      <span class="hljs-comment"># Encode query to vector</span>
      query_vector = model.encode(query).tolist()
  
      <span class="hljs-comment"># Search using HNSW index with explicit FLOAT[] cast</span>
      results = conn.execute(<span class="hljs-string">"""
          SELECT id, text, array_distance(vector, CAST(? AS FLOAT[768])) as distance
          FROM documents
          ORDER BY array_distance(vector, CAST(? AS FLOAT[768]))
          LIMIT ?
      """</span>, [query_vector, query_vector, n_results]).fetchall()
  
      <span class="hljs-keyword">return</span> [{<span class="hljs-string">"id"</span>: r[<span class="hljs-number">0</span>], <span class="hljs-string">"text"</span>: r[<span class="hljs-number">1</span>], <span class="hljs-string">"distance"</span>: <span class="hljs-built_in">float</span>(r[<span class="hljs-number">2</span>])} <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results]
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
      conn, model = <span class="hljs-keyword">await</span> setup_vector_db()
  
      <span class="hljs-comment"># Add sample documents</span>
      documents = [<span class="hljs-string">"Apple is a fruit"</span>, <span class="hljs-string">"Orange is citrus"</span>, <span class="hljs-string">"Computer is electronic"</span>]
      embeddings = model.encode(documents).tolist()
  
      <span class="hljs-comment"># Insert documents and vectors</span>
      conn.executemany(<span class="hljs-string">"""
          INSERT INTO documents (id, text, vector)
          VALUES (?, ?, ?)
      """</span>, [(<span class="hljs-built_in">str</span>(i), text, embedding)
            <span class="hljs-keyword">for</span> i, (text, embedding) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(documents, embeddings), <span class="hljs-number">1</span>)])
  
      <span class="hljs-comment"># Search similar documents</span>
      results = <span class="hljs-keyword">await</span> search_similar(conn, model, <span class="hljs-string">"fruit"</span>)
      <span class="hljs-built_in">print</span>(results)
  
  <span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
      <span class="hljs-keyword">import</span> asyncio
      asyncio.run(main())
  </code></pre>
  </div><!---->
              <div class="card-body"><!--?lit$772497800$-->
      <div class="mb-3">
        <p>
          InfoCore Solutions is a technology consulting firm that maintains an extensive internal knowledge base of
          technical documents, project reports, and case studies. Employees frequently search through these documents to
          answer client questions quickly or gain insights for ongoing projects. However, due to the sheer volume of
          documentation, traditional keyword-based search often returns too many irrelevant results.
        </p>
        <p>
          To address this issue, InfoCore's data science team decides to integrate a semantic search feature into their
          internal portal. This feature uses text embeddings to capture the contextual meaning of both the documents and
          the user's query. The documents are pre-embedded, and when an employee submits a search query, the system
          computes the similarity between the query's embedding and those of the documents. The API then returns a ranked
          list of document identifiers based on similarity.
        </p>
        <p>
          Imagine you are an engineer on the InfoCore team. Your task is to build a FastAPI POST endpoint that accepts an
          array of docs and query string via a JSON body. The endpoint is structured as follows:
        </p>
        <pre><code data-highlighted="yes" class="hljs language-jboss-cli">POST <span class="hljs-string">/similarity</span>
  
  {
    <span class="hljs-string">"docs"</span>: [<span class="hljs-string">"Contents of document 1"</span>, <span class="hljs-string">"Contents of document 2"</span>, <span class="hljs-string">"Contents of document 3"</span>, <span class="hljs-string">...</span>],
    <span class="hljs-string">"query"</span>: <span class="hljs-string">"Your query string"</span>
  }
  </code></pre>
  
        <p><strong>Service Flow:</strong></p>
        <ol>
          <li>
            <strong>Request Payload:</strong> The client sends a POST request with a JSON body containing:
            <ul>
              <li>
                <strong><code>docs</code>:</strong> An array of document texts from the internal knowledge base.
              </li>
              <li>
                <strong><code>query</code>:</strong> A string representing the user's search query.
              </li>
            </ul>
          </li>
          <li>
            <strong>Embedding Generation:</strong> For each document in the <code>docs</code> array and for the
            <code>query</code> string, the API computes a text embedding using <code>text-embedding-3-small</code>.
          </li>
          <li>
            <strong>Similarity Computation:</strong> The API then calculates the cosine similarity between the query
            embedding and each document embedding. This allows the service to determine which documents best match the
            intent of the query.
          </li>
          <li>
            <p>
              <strong>Response Structure:</strong> After ranking the documents by their similarity scores, the API returns
              the identifiers (or positions) of the three most similar documents. The JSON response might look like this:
            </p>
            <pre><code class="language-json hljs" data-highlighted="yes"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"matches"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"Contents of document 3"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"Contents of document 1"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"Contents of document 2"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
  </code></pre>
            <p>
              Here, <code>"Contents of document 3"</code> is considered the closest match, followed by
              <code>"Contents of document 1"</code>, then <code>"Contents of document 2"</code>.
            </p>
          </li>
        </ol>
        <p>
          Make sure you enable CORS to allow <code>OPTIONS</code> and <code>POST</code> methods, perhaps allowing all
          origins and headers.
        </p>
  
        <div class="mb-3">
          <label class="form-label" for="q-vector-databases">
            What is the API URL endpoint for your implementation? It might look like:
            <code>http://127.0.0.1:8000/similarity</code>
          </label>
          <input class="form-control" type="url" required="" id="q-vector-databases" name="q-vector-databases" disabled=""><div class="valid-feedback mb-3 comment">Correct!</div>
              <div class="invalid-feedback mb-3 comment">Incorrect. Try again.</div>
          <p class="text-muted">
            We'll check by sending a POST request to this URL with a JSON body containing random <code>docs</code> and
            <code>query</code>.
          </p>
        </div>
      </div>
    </div>
              <div class="card-footer d-flex">
                <button type="button" class="btn btn-primary check-answer" data-question="q-vector-databases" disabled="">Check</button>
              </div>
            </div>
          <!----><!---->
            <div class="card my-5" data-question="q-function-calling" id="hq-function-calling">
              <div class="card-header">
                <span class="badge text-bg-primary me-2"><!--?lit$772497800$-->8</span>
                <!--?lit$772497800$-->Function Calling (<!--?lit$772497800$-->1.5 <!--?lit$772497800$-->marks)
              </div>
              <!--?lit$772497800$--><!----><div class="card-body border-bottom"><!--?lit$772497800$--><h2>Function Calling with OpenAI</h2>
  <p><a href="https://platform.openai.com/docs/guides/function-calling" target="_blank" rel="noopener noreferrer">Function Calling</a> allows Large Language Models to convert natural language into structured function calls. This is perfect for building chatbots and AI assistants that need to interact with your backend systems.</p>
  <p>OpenAI supports <a href="https://platform.openai.com/docs/guides/function-calling" target="_blank" rel="noopener noreferrer">Function Calling</a> -- a way for LLMs to suggest what functions to call and how.</p>
  <p><a href="https://youtu.be/aqdWSYWC_LI" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi_webp/aqdWSYWC_LI/sddefault.webp" alt="OpenAI Function Calling - Full Beginner Tutorial" class="img-fluid"></a></p>
  <p>Here's a minimal example using Python and OpenAI's function calling that identifies the weather in a given location.</p>
  <pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># /// script</span>
  <span class="hljs-comment"># requires-python = "&gt;=3.11"</span>
  <span class="hljs-comment"># dependencies = [</span>
  <span class="hljs-comment">#   "httpx",</span>
  <span class="hljs-comment"># ]</span>
  <span class="hljs-comment"># ///</span>
  
  <span class="hljs-keyword">import</span> httpx
  <span class="hljs-keyword">import</span> os
  <span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>
  
  
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">query_gpt</span>(<span class="hljs-params">user_input: <span class="hljs-built_in">str</span>, tools: <span class="hljs-built_in">list</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
      response = httpx.post(
          <span class="hljs-string">"https://api.openai.com/v1/chat/completions"</span>,
          headers={
              <span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Bearer <span class="hljs-subst">{os.getenv(<span class="hljs-string">'OPENAI_API_KEY'</span>)}</span>"</span>,
              <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
          },
          json={
              <span class="hljs-string">"model"</span>: <span class="hljs-string">"gpt-4o-mini"</span>,
              <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: user_input}],
              <span class="hljs-string">"tools"</span>: tools,
              <span class="hljs-string">"tool_choice"</span>: <span class="hljs-string">"auto"</span>,
          },
      )
      <span class="hljs-keyword">return</span> response.json()[<span class="hljs-string">"choices"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"message"</span>]
  
  
  WEATHER_TOOL = {
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
      <span class="hljs-string">"function"</span>: {
          <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_weather"</span>,
          <span class="hljs-string">"description"</span>: <span class="hljs-string">"Get the current weather for a location"</span>,
          <span class="hljs-string">"parameters"</span>: {
              <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
              <span class="hljs-string">"properties"</span>: {
                  <span class="hljs-string">"location"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"City name or coordinates"</span>}
              },
              <span class="hljs-string">"required"</span>: [<span class="hljs-string">"location"</span>],
              <span class="hljs-string">"additionalProperties"</span>: <span class="hljs-literal">False</span>,
          },
          <span class="hljs-string">"strict"</span>: <span class="hljs-literal">True</span>,
      },
  }
  
  <span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
      response = query_gpt(<span class="hljs-string">"What is the weather in San Francisco?"</span>, [WEATHER_TOOL])
      <span class="hljs-built_in">print</span>([tool_call[<span class="hljs-string">"function"</span>] <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> response[<span class="hljs-string">"tool_calls"</span>]])
  </code></pre>
  <h3>How to define functions</h3>
  <p>The function definition is a <a href="https://json-schema.org/" target="_blank" rel="noopener noreferrer">JSON schema</a> with a few OpenAI specific properties.
  See the <a href="https://platform.openai.com/docs/guides/structured-outputs#supported-schemas" target="_blank" rel="noopener noreferrer">Supported schemas</a>.</p>
  <p>Here's an example of a function definition for scheduling a meeting:</p>
  <pre><code class="language-python hljs" data-highlighted="yes">MEETING_TOOL = {
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
      <span class="hljs-string">"function"</span>: {
          <span class="hljs-string">"name"</span>: <span class="hljs-string">"schedule_meeting"</span>,
          <span class="hljs-string">"description"</span>: <span class="hljs-string">"Schedule a meeting room for a specific date and time"</span>,
          <span class="hljs-string">"parameters"</span>: {
              <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
              <span class="hljs-string">"properties"</span>: {
                  <span class="hljs-string">"date"</span>: {
                      <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                      <span class="hljs-string">"description"</span>: <span class="hljs-string">"Meeting date in YYYY-MM-DD format"</span>
                  },
                  <span class="hljs-string">"time"</span>: {
                      <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                      <span class="hljs-string">"description"</span>: <span class="hljs-string">"Meeting time in HH:MM format"</span>
                  },
                  <span class="hljs-string">"meeting_room"</span>: {
                      <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                      <span class="hljs-string">"description"</span>: <span class="hljs-string">"Name of the meeting room"</span>
                  }
              },
              <span class="hljs-string">"required"</span>: [<span class="hljs-string">"date"</span>, <span class="hljs-string">"time"</span>, <span class="hljs-string">"meeting_room"</span>],
              <span class="hljs-string">"additionalProperties"</span>: <span class="hljs-literal">False</span>
          },
          <span class="hljs-string">"strict"</span>: <span class="hljs-literal">True</span>
      }
  }
  </code></pre>
  <h3>How to define multiple functions</h3>
  <p>You can define multiple functions by passing a list of function definitions to the <code>tools</code> parameter.</p>
  <p>Here's an example of a list of function definitions for handling employee expenses and calculating performance bonuses:</p>
  <pre><code class="language-python hljs" data-highlighted="yes">tools = [
      {
          <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
          <span class="hljs-string">"function"</span>: {
              <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_expense_balance"</span>,
              <span class="hljs-string">"description"</span>: <span class="hljs-string">"Get expense balance for an employee"</span>,
              <span class="hljs-string">"parameters"</span>: {
                  <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                  <span class="hljs-string">"properties"</span>: {
                      <span class="hljs-string">"employee_id"</span>: {
                          <span class="hljs-string">"type"</span>: <span class="hljs-string">"integer"</span>,
                          <span class="hljs-string">"description"</span>: <span class="hljs-string">"Employee ID number"</span>
                      }
                  },
                  <span class="hljs-string">"required"</span>: [<span class="hljs-string">"employee_id"</span>],
                  <span class="hljs-string">"additionalProperties"</span>: <span class="hljs-literal">False</span>
              },
              <span class="hljs-string">"strict"</span>: <span class="hljs-literal">True</span>
          }
      },
      {
          <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
          <span class="hljs-string">"function"</span>: {
              <span class="hljs-string">"name"</span>: <span class="hljs-string">"calculate_performance_bonus"</span>,
              <span class="hljs-string">"description"</span>: <span class="hljs-string">"Calculate yearly performance bonus for an employee"</span>,
              <span class="hljs-string">"parameters"</span>: {
                  <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                  <span class="hljs-string">"properties"</span>: {
                      <span class="hljs-string">"employee_id"</span>: {
                          <span class="hljs-string">"type"</span>: <span class="hljs-string">"integer"</span>,
                          <span class="hljs-string">"description"</span>: <span class="hljs-string">"Employee ID number"</span>
                      },
                      <span class="hljs-string">"current_year"</span>: {
                          <span class="hljs-string">"type"</span>: <span class="hljs-string">"integer"</span>,
                          <span class="hljs-string">"description"</span>: <span class="hljs-string">"Year to calculate bonus for"</span>
                      }
                  },
                  <span class="hljs-string">"required"</span>: [<span class="hljs-string">"employee_id"</span>, <span class="hljs-string">"current_year"</span>],
                  <span class="hljs-string">"additionalProperties"</span>: <span class="hljs-literal">False</span>
              },
              <span class="hljs-string">"strict"</span>: <span class="hljs-literal">True</span>
          }
      }
  ]
  </code></pre>
  <p>Best Practices:</p>
  <ol>
  <li><strong>Use Strict Mode</strong><ul>
  <li>Always set <code>strict: True</code> to ensure valid function calls</li>
  <li>Define all required parameters</li>
  <li>Set <code>additionalProperties: False</code></li>
  </ul>
  </li>
  <li><strong>Use tool choice</strong><ul>
  <li>Set <code>tool_choice: "required"</code> to ensure that the model will always call one or more tools</li>
  <li>The default is <code>tool_choice: "auto"</code> which means the model will choose a tool only if appropriate</li>
  </ul>
  </li>
  <li><strong>Clear Descriptions</strong><ul>
  <li>Write detailed function and parameter descriptions</li>
  <li>Include expected formats and units</li>
  <li>Mention any constraints or limitations</li>
  </ul>
  </li>
  <li><strong>Error Handling</strong><ul>
  <li>Validate function inputs before execution</li>
  <li>Return clear error messages</li>
  <li>Handle missing or invalid parameters</li>
  </ul>
  </li>
  </ol>
  </div><!---->
              <div class="card-body"><!--?lit$772497800$-->
      <div class="mb-3">
        <p>
          <strong>TechNova Corp.</strong> is a multinational corporation that has implemented a digital assistant to
          support employees with various internal tasks. The assistant can answer queries related to human resources, IT
          support, and administrative services. Employees use a simple web interface to enter their requests, which may
          include:
        </p>
        <ul>
          <li>Checking the status of an IT support ticket.</li>
          <li>Scheduling a meeting.</li>
          <li>Retrieving their current expense reimbursement balance.</li>
          <li>Requesting details about their performance bonus.</li>
          <li>Reporting an office issue by specifying a department or issue number.</li>
        </ul>
        <p>
          Each question is direct and templatized, containing one or more parameters such as an employee or ticket number
          (which might be randomized). In the backend, a FastAPI app routes each request by matching the query to one of a
          set of pre-defined functions. The response that the API returns is used by OpenAI to call the right function
          with the necessary arguments.
        </p>
        <p><strong>Pre-Defined Functions:</strong></p>
        <p>For this exercise, assume the following functions have been defined:</p>
        <ul>
          <li><code>get_ticket_status(ticket_id: int)</code></li>
          <li><code>schedule_meeting(date: str, time: str, meeting_room: str)</code></li>
          <li><code>get_expense_balance(employee_id: int)</code></li>
          <li><code>calculate_performance_bonus(employee_id: int, current_year: int)</code></li>
          <li><code>report_office_issue(issue_code: int, department: str)</code></li>
        </ul>
        <p>
          Each function has a specific signature, and the student’s FastAPI app should map specific queries to these
          functions.
        </p>
        <p><strong>Example Questions (Templatized with a Random Number):</strong></p>
        <ol>
          <li>
            <strong>Ticket Status:</strong><br>Query: <code>"What is the status of ticket 83742?"</code><br>→ Should
            map to <code>get_ticket_status(ticket_id=83742)</code>
          </li>
          <li>
            <strong>Meeting Scheduling:</strong><br>Query:
            <code>"Schedule a meeting on 2025-02-15 at 14:00 in Room A."</code><br>→ Should map to
            <code>schedule_meeting(date="2025-02-15", time="14:00", meeting_room="Room A")</code>
          </li>
          <li>
            <strong>Expense Reimbursement:</strong><br>Query: <code>"Show my expense balance for employee 10056."</code><br>→ Should map to
            <code>get_expense_balance(employee_id=10056)</code>
          </li>
          <li>
            <strong>Performance Bonus Calculation:</strong><br>Query:
            <code>"Calculate performance bonus for employee 10056 for 2025."</code><br>→ Should map to
            <code>calculate_performance_bonus(employee_id=10056, current_year=2025)</code>
          </li>
          <li>
            <strong>Office Issue Reporting:</strong><br>Query:
            <code>"Report office issue 45321 for the Facilities department."</code><br>→ Should map to
            <code>report_office_issue(issue_code=45321, department="Facilities")</code>
          </li>
        </ol>
        <p><strong>Task Overview:</strong></p>
        <p>Develop a FastAPI application that:</p>
        <ol>
          <li>
            Exposes a GET endpoint <code>/execute?q=...</code> where the query parameter <code>q</code> contains one of
            the pre-templatized questions.
          </li>
          <li>Analyzes the <code>q</code> parameter to identify which function should be called.</li>
          <li>Extracts the parameters from the question text.</li>
          <li>
            <p>Returns a response in the following JSON format:</p>
            <pre><code class="language-json hljs" data-highlighted="yes"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"function_name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{ ...JSON encoded parameters... }"</span> <span class="hljs-punctuation">}</span></code></pre>
          </li>
        </ol>
        <p>For example, the query <code>"What is the status of ticket 83742?"</code> should return:</p>
        <pre><code class="language-json hljs" data-highlighted="yes"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_ticket_status"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{\"ticket_id\": 83742}"</span>
  <span class="hljs-punctuation">}</span></code></pre>
        <p>Make sure you enable <strong>CORS</strong> to allow GET requests from any origin.</p>
  
        <div class="mb-3">
          <label class="form-label" for="q-function-calling">
            What is the API URL endpoint for your implementation? It might look like:
            <code>http://127.0.0.1:8000/execute</code>
          </label>
          <input class="form-control" type="url" required="" id="q-function-calling" name="q-function-calling" disabled=""><div class="valid-feedback mb-3 comment">Correct!</div>
              <div class="invalid-feedback mb-3 comment">Incorrect. Try again.</div>
          <p class="text-muted">
            We'll check by sending a GET request to this URL with <code>?q=...</code> containing a task. We'll verify that
            it matches the expected response. Arguments must be in the same order as the function definition.
          </p>
        </div>
      </div>
    </div>
              <div class="card-footer d-flex">
                <button type="button" class="btn btn-primary check-answer" data-question="q-function-calling" disabled="">Check</button>
              </div>
            </div>
          <!----><!---->
            <div class="card my-5" data-question="q-get-llm-to-say-yes" id="hq-get-llm-to-say-yes">
              <div class="card-header">
                <span class="badge text-bg-primary me-2"><!--?lit$772497800$-->9</span>
                <!--?lit$772497800$-->Get an LLM to say Yes (<!--?lit$772497800$-->1 <!--?lit$772497800$-->mark)
              </div>
              <!--?lit$772497800$--><!----><div class="card-body border-bottom"><!--?lit$772497800$--><h2>Prompt Engineering</h2>
  <p>Prompt engineering is the process of crafting effective prompts for large language models (LLMs).</p>
  <p>One of the best ways to approach prompt engineering is to think of LLMs as a smart colleague (with amnesia) who needs explicit instructions.</p>
  <p>The most authoritative guides are from the LLM providers themselves:</p>
  <ul>
  <li><a href="https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/" target="_blank" rel="noopener noreferrer">Anthropic</a></li>
  <li><a href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/introduction-prompt-design" target="_blank" rel="noopener noreferrer">Google</a></li>
  <li><a href="https://platform.openai.com/docs/guides/prompt-engineering" target="_blank" rel="noopener noreferrer">OpenAI</a></li>
  </ul>
  <p>Here are some best practices:</p>
  <h3>Use prompt optimizers</h3>
  <p>They rewrite your prompt to improve it. Explore:</p>
  <ul>
  <li><a href="https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prompt-improver" target="_blank" rel="noopener noreferrer">Anthropic Prompt Optimizer</a></li>
  <li><a href="https://platform.openai.com/docs/guides/prompt-generation" target="_blank" rel="noopener noreferrer">OpenAI Prompt Generation</a></li>
  <li><a href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/ai-powered-prompt-writing" target="_blank" rel="noopener noreferrer">Google AI-powered prompt writing tools</a></li>
  </ul>
  <h3>Be clear, direct, and detailed</h3>
  <p>Be explicit and thorough. Include all necessary context, goals, and details so the model understands the full picture.</p>
  <ul>
  <li><strong>BAD</strong>: <em>Explain gravitation lensing.</em> (Reason: Vague and lacks context or detail.)</li>
  <li><strong>GOOD</strong>: <em>Explain the concept of gravitational lensing to a high school student who understands basic physics, including how it’s observed and its significance in astronomy.</em> (Reason: Specifies the audience, scope, and focus.)</li>
  </ul>
  <blockquote>
  <p>When you ask a question, don’t be vague. Spell it out. Give every detail the listener needs.
  The clearer you are, the better the answer you’ll get.
  For example, don't just say, Explain Gravitation Lensing.
  Say, Explain the concept of gravitational lensing to a high school student who understands basic physics, including how it’s observed and its significance in astronomy.</p>
  </blockquote>
  <p><a href="https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/be-clear-and-direct" target="_blank" rel="noopener noreferrer">Anthropic</a>
  | <a href="https://platform.openai.com/docs/guides/prompt-engineering#tactic-include-details-in-your-query-to-get-more-relevant-answers" target="_blank" rel="noopener noreferrer">OpenAI</a>
  | <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/clear-instructions" target="_blank" rel="noopener noreferrer">Google</a></p>
  <h3>Give examples</h3>
  <p>Provide 2-3 relevant examples to guide the model on the style, structure, or format you expect. This helps the model produce outputs consistent with your desired style.</p>
  <ul>
  <li><p><strong>BAD</strong>: <em>Explain how to tie a bow tie.</em> (Reason: No examples or reference points given.)</p>
  </li>
  <li><p><strong>GOOD</strong>:
  <em>Explain how to tie a bow tie. For example:</em></p>
  <ol>
  <li><em>To tie a shoelace, you cross the laces and pull them tight...</em></li>
  <li><em>To tie a necktie, you place it around the collar and loop it through...</em></li>
  </ol>
  <p><em>Now, apply a similar step-by-step style to describe how to tie a bow tie.</em> (Reason: Provides clear examples and a pattern to follow.)</p>
  </li>
  </ul>
  <blockquote>
  <p>Give examples to the model. If you want someone to build a house, show them a sketch. Don’t just say ‘build something.’
  Giving examples is like showing a pattern. It makes everything easier to follow.</p>
  </blockquote>
  <p><a href="https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/multishot-prompting" target="_blank" rel="noopener noreferrer">Anthropic</a>
  | <a href="https://platform.openai.com/docs/guides/prompt-engineering#tactic-provide-examples" target="_blank" rel="noopener noreferrer">OpenAI</a>
  | <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/few-shot-examples" target="_blank" rel="noopener noreferrer">Google</a></p>
  <h3>Think step by step</h3>
  <p>Instruct the model to reason through the problem step by step. This leads to more logical, well-structured answers.</p>
  <ul>
  <li><strong>BAD</strong>: <em>Given this transcript, is the customer satisfied?</em> (Reason: No prompt for structured reasoning.)</li>
  <li><strong>GOOD</strong>: <em>Given this transcript, is the customer satisfied? Think step by step.</em> (Reason: Directly instructs the model to break down reasoning into steps.)</li>
  </ul>
  <blockquote>
  <p>Ask the model to think step by step. Don’t ask the model to just give the final answer right away.
  That's like asking someone to answer with the first thing that pops into their head.
  Instead, ask them to break down their thought process into simple moves — like showing each rung of a ladder as they climb.
  For example, when thinking step by step, the model could, A, list each customer question, B, find out if it was addressed, and C, decide that the agent answered only 2 out of the 3 questions.</p>
  </blockquote>
  <p><a href="https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/chain-of-thought" target="_blank" rel="noopener noreferrer">Anthropic</a>
  | <a href="https://platform.openai.com/docs/guides/prompt-engineering#strategy-give-models-time-to-think" target="_blank" rel="noopener noreferrer">OpenAI</a>
  | <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/break-down-prompts" target="_blank" rel="noopener noreferrer">Google</a></p>
  <h3>Assign a role</h3>
  <p>Specify a role or persona for the model. This provides context and helps tailor the response style.</p>
  <ul>
  <li><strong>BAD</strong>: <em>Explain how to fix a software bug.</em> (Reason: No role or perspective given.)</li>
  <li><strong>GOOD</strong>: <em>You are a seasoned software engineer. Explain how to fix a software bug in legacy code, including the debugging and testing process.</em> (Reason: Assigns a clear, knowledgeable persona, guiding the style and depth.)</li>
  </ul>
  <blockquote>
  <p>Tell the model who they are. Maybe they’re a seasoned software engineer fixing a legacy bug, or an experienced copy editor revising a publication.
  By clearly telling the model who they are, you help them speak with just the right expertise and style.
  Suddenly, your explanation sounds like it’s coming from a true specialist, not a random voice.</p>
  </blockquote>
  <p><a href="https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/system-prompts" target="_blank" rel="noopener noreferrer">Anthropic</a>
  | <a href="https://platform.openai.com/docs/guides/prompt-engineering#tactic-ask-the-model-to-adopt-a-persona" target="_blank" rel="noopener noreferrer">OpenAI</a>
  | <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/assign-role" target="_blank" rel="noopener noreferrer">Google</a></p>
  <h3>Use XML to structure your prompt</h3>
  <p>Use XML tags to separate different parts of the prompt clearly. This helps the model understand structure and requirements.</p>
  <ul>
  <li><strong>BAD</strong>: <em>Here’s what I want: Provide a summary and then an example.</em> (Reason: Unstructured, no clear separation of tasks.)</li>
  <li><strong>GOOD</strong>:<pre><code class="language-xml hljs" data-highlighted="yes"><span class="hljs-tag">&lt;<span class="hljs-name">instructions</span>&gt;</span>
    Provide a summary of the concept of machine learning.
  <span class="hljs-tag">&lt;/<span class="hljs-name">instructions</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">example</span>&gt;</span>
    Then provide a simple, concrete example of a machine learning application (e.g., an email spam filter).
  <span class="hljs-tag">&lt;/<span class="hljs-name">example</span>&gt;</span>
  </code></pre>
  (Reason: Uses XML tags to clearly distinguish instructions from examples.)</li>
  </ul>
  <blockquote>
  <p>Think of your request like a box. XML tags are neat little labels on that box.
  They help keep parts sorted, so nothing gets lost in the shuffle.</p>
  </blockquote>
  <p><a href="https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/use-xml-tags" target="_blank" rel="noopener noreferrer">Anthropic</a>
  | <a href="https://platform.openai.com/docs/guides/prompt-engineering#tactic-use-delimiters-to-clearly-indicate-distinct-parts-of-the-input" target="_blank" rel="noopener noreferrer">OpenAI</a>
  | <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/structure-prompts" target="_blank" rel="noopener noreferrer">Google</a></p>
  <h3>Use Markdown to format your output</h3>
  <p>Encourage the model to use Markdown for headings, lists, code blocks, and other formatting features to produce structured, easily readable answers.</p>
  <ul>
  <li><strong>BAD</strong>: <em>Give me the steps in plain text.</em> (Reason: No specific formatting instructions, less readable.)</li>
  <li><strong>GOOD</strong>: <em>Provide the steps in a markdown-formatted list with ### headings for each section and numbered bullet points.</em> (Reason: Directly instructs to use Markdown formatting, making output more structured and clear.)</li>
  <li><strong>BAD</strong>: <em>Correct the spelling and show the corrections.</em> (Reason: No specific formatting instructions)</li>
  <li><strong>GOOD</strong>: <em>Correct the spelling, showing &lt;ins&gt;additions&lt;/ins&gt; and &lt;del&gt;deletions&lt;/del&gt;.</em> (Reason: Directly instructs to use HTML formatting, making output more structured and clear.)</li>
  </ul>
  <blockquote>
  <p>Markdown is a simple formatting language that all models understand.
  You can have them add neat headings, sections, bold highlights, and bullet points.
  These make complex documents more scannable and easy on the eyes.</p>
  </blockquote>
  <h3>Use JSON for machine-readable output</h3>
  <p>When you need structured data, ask for a JSON-formatted response. This ensures the output is machine-readable and organized.</p>
  <ul>
  <li><p><strong>BAD</strong>: <em>Just list the items.</em> (Reason: Unstructured plain text makes parsing harder.)</p>
  </li>
  <li><p><strong>GOOD</strong>:</p>
  <pre><code class="language-markdown hljs" data-highlighted="yes">Organize as an array of objects in a JSON format, like this:
  
  <span class="hljs-code">```json
  [
    { "name": "Item 1", "description": "Description of Item 1" },
    { "name": "Item 2", "description": "Description of Item 2" },
    { "name": "Item 3", "description": "Description of Item 3" }
  ]
  ```</span>
  </code></pre>
  <p>(Reason: Instructing JSON format ensures structured, machine-readable output.)</p>
  </li>
  </ul>
  <p>Note: Always use <a href="playground#attachments" target="_blank" rel="noopener noreferrer">JSON schema</a> if possible. <a href="https://json-schema.org/" target="_blank" rel="noopener noreferrer">JSON schema</a> is a way to describe the structure of JSON data. An easy way to get the JSON schema is to give ChatGPT sample output and ask it to generate the schema.</p>
  <blockquote>
  <p>Imagine you’re organizing data for a big project. Plain text is like dumping everything into one messy pile — it’s hard to find what you need later.
  JSON, on the other hand, is like packing your data into neat, labeled boxes within boxes.
  Everything has its place: fields like ‘name,’ ‘description,’ and ‘value’ make the data easy to read, especially for machines.
  For example, instead of just listing items, you can structure them as a JSON array, with each item as an object.
  That way, when you hand it to a program, it’s all clear and ready to use.</p>
  </blockquote>
  <h3>Prefer Yes/No answers</h3>
  <p>Convert rating or percentage questions into Yes/No queries. LLMs handle binary choices better than numeric scales.</p>
  <ul>
  <li><strong>BAD</strong>: <em>On a scale of 1-10, how confident are you that this method works?</em> (Reason: Asks for a numeric rating, which can be imprecise.)</li>
  <li><strong>GOOD</strong>: <em>Is this method likely to work as intended? Please give a reasoning and then answer Yes or No.</em> (Reason: A binary question simplifies the response and clarifies what’s being asked.)</li>
  </ul>
  <blockquote>
  <p>Don’t ask ‘On a scale of one to five...’. Models are not good with numbers.
  They don't know how to grade something 7 versus 8 on a 10 point scale. ‘Yes or no?’ is simple. It’s clear. It’s quick.
  So, break your question into simple parts that they can answer with just a yes or a no.</p>
  </blockquote>
  <h3>Ask for reason first, then the answer</h3>
  <p>Instruct the model to provide its reasoning steps <em>before</em> stating the final answer. This makes it less likely to justify itself and more likely to think deeper, leading to more accurate results.</p>
  <ul>
  <li><strong>BAD</strong>: <em>What is the best route to take?</em> (Reason: Direct question without prompting reasoning steps first.)</li>
  <li><strong>GOOD</strong>: <em>First, explain your reasoning step by step for how you determine the best route. Then, after you’ve reasoned it out, state your final recommendation for the best route.</em> (Reason: Forces the model to show its reasoning process before giving the final answer.)</li>
  </ul>
  <blockquote>
  <p>BEFORE making its final choice, have the model talk through their thinking. Reasoning first, answer second.
  That way, the model won't be tempted to justify an answer that they gave impulsively. It is also more likely to think deeper.</p>
  </blockquote>
  <h3>Use proper spelling and grammar</h3>
  <p>A well-written, grammatically correct prompt clarifies expectations. Poorly structured prompts can confuse the model.</p>
  <ul>
  <li><strong>BAD</strong>: <em>xplin wht the weirless netork do? make shur to giv me a anser??</em> (Reason: Poor spelling and unclear instructions.)</li>
  <li><strong>GOOD</strong>: <em>Explain what a wireless network does. Please provide a detailed, step-by-step explanation.</em> (Reason: Proper spelling and clarity lead to a more coherent response.)</li>
  </ul>
  <blockquote>
  <p>If your question sounds like gibberish, expect a messy answer. Speak cleanly.
  When you do, the response will be much clearer.</p>
  </blockquote>
  <h2>Video Tutorials</h2>
  <p>Watch <a href="https://youtu.be/_ZvnD73m40o" target="_blank" rel="noopener noreferrer">Prompt Engineering Tutorial – Master ChatGPT and LLM Responses (41 min)</a>. It covers:</p>
  <ol>
  <li>Basics of <strong>AI and large language models</strong>.</li>
  <li>How to write clear and detailed prompts to improve answers.</li>
  <li>Tips for creating interactive and personalized AI responses.</li>
  <li>Advanced topics like <strong>AI mistakes</strong> (hallucinations) and <strong>text embeddings</strong> (how AI understands words).</li>
  <li>Fun examples, like making AI write poems or correct grammar.</li>
  </ol>
  <p><a href="https://youtu.be/_ZvnD73m40o" target="_blank" rel="noopener noreferrer"><img src="https://i.ytimg.com/vi_webp/_ZvnD73m40o/sddefault.webp" alt="Prompt Engineering Tutorial – Master ChatGPT and LLM Responses" class="img-fluid"></a></p>
  </div><!---->
              <div class="card-body"><!--?lit$772497800$-->
      <p>
        SecurePrompt Technologies is a cybersecurity firm that specializes in deploying large language models (LLMs) for
        sensitive enterprise applications. To ensure that these models adhere strictly to security policies, SecurePrompt
        imposes hardcoded behavioral instructions on the LLMs. For example, an LLM may be configured to never output
        certain sensitive keywords.
      </p>
      <p>
        As part of their regular security audits and red-team exercises, SecurePrompt's engineers and external auditors
        test how well the LLMs follow these strict instructions. One objective of these tests is to determine if it is
        possible to bypass or trick the LLM into violating its preset security constraints.
      </p>
      <p>
        This task is simulates potential attack vectors where a malicious actor might manipulate the model's output by
        ingeniously engineering the prompt. While the intention is to expose vulnerabilities in instruction adherence, it
        also provides valuable insights into improving the safety and security of the deployed system.
      </p>
      <p>
        Here's your task: You are chatting with an LLM that has been told to never say <code><!--?lit$772497800$-->Yes</code>. You need to
        get it to say <code><!--?lit$772497800$-->Yes</code>.
      </p>
      <p>Use your <a href="https://aiproxy.sanand.workers.dev/">AI Proxy</a> token when prompted.</p>
      <div class="mb-3">
        <label class="form-label" for="q-get-llm-to-say-yes">Write a prompt that will get the LLM to say <code><!--?lit$772497800$-->Yes</code>.</label>
        <input class="form-control" id="q-get-llm-to-say-yes" name="q-get-llm-to-say-yes" disabled=""><div class="valid-feedback mb-3 comment">Correct!</div>
              <div class="invalid-feedback mb-3 comment">Incorrect. Try again.</div>
        <p class="text-muted">
          As long as the LLM says the word <code><!--?lit$772497800$-->Yes</code> (case sensitive), you will be marked correct.
          <strong>Careful!</strong> If you get a correct answer, submit and don't change it. You may get a different
          answer next time.
        </p>
      </div>
    </div>
              <div class="card-footer d-flex">
                <button type="button" class="btn btn-primary check-answer" data-question="q-get-llm-to-say-yes" disabled="">Check</button>
              </div>
            </div>
          <!----></section>
        <button type="submit" class="btn btn-success check-action" title="Check your score" disabled="">Check all</button>
        <button type="button" class="btn btn-primary save-action" title="Save your progress" disabled="">Save</button>
        <div id="submission-status" class="my-3"></div>
        <p>Save regularly. Your <em>last saved</em> submission will be evaluated.</p>
      </form>
  
      <footer class="my-5 d-flex align-items-center justify-content-center" style="height: 50vh;">
        <h1 class="display-4">Best of luck!</h1>
      </footer>
    </main>
  
    <script type="module" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@gramex/ui@0.3/dist/dark-theme.js" integrity="sha384-WWZYgp4BxSnWElq/A+SNJoNuJ5eZf6xBLqGUBHmu6QXN+9dqtz7bTtyuBwy9O7C+" crossorigin="anonymous"></script>
    <script src="https://accounts.google.com/gsi/client"></script>
    <script type="module">
      import { setup } from './exam.js';
      setup(window.location.pathname.slice(1));
    </script>
  
  
  
  </body></html>